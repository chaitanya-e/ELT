Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.

Install the latest PowerShell for new features and improvements! https://aka.ms/PSWindows

PS C:\Users\chait\docker_tutorial\elt> python --version
Python 3.12.0
PS C:\Users\chait\docker_tutorial\elt> pip install dbt-postgres
Collecting dbt-postgres
  Obtaining dependency information for dbt-postgres from https://files.pythonhosted.org/packages/08/84/980eecb49b90c01ea4c6687b42ce302305f2a718c2ce1516def444df027a/dbt_postgres-1.7.10-py3-none-any.whl.metadata
  Downloading dbt_postgres-1.7.10-py3-none-any.whl.metadata (2.8 kB)
Collecting dbt-core==1.7.10 (from dbt-postgres)
  Obtaining dependency information for dbt-core==1.7.10 from https://files.pythonhosted.org/packages/24/70/beb79847b039422fcb02776fa534161a5833e149eabeaf5c19468d21cd94/dbt_core-1.7.10-py3-none-any.whl.metadata
  Downloading dbt_core-1.7.10-py3-none-any.whl.metadata (4.0 kB)
Collecting psycopg2-binary~=2.8 (from dbt-postgres)
  Obtaining dependency information for psycopg2-binary~=2.8 from https://files.pythonhosted.org/packages/7b/08/9c66c269b0d417a0af9fb969535f0371b8c538633535a7a6a5ca3f9231e2/psycopg2_binary-2.9.9-cp312-cp312-win_amd64.whl.metadata
  Downloading psycopg2_binary-2.9.9-cp312-cp312-win_amd64.whl.metadata (4.6 kB)
Collecting agate (from dbt-postgres)
  Obtaining dependency information for agate from https://files.pythonhosted.org/packages/d1/53/89b197cb472a3175d73384761a3413fd58e6b65a794c1102d148b8de87bd/agate-1.9.1-py2.py3-none-any.whl.metadata
  Downloading agate-1.9.1-py2.py3-none-any.whl.metadata (3.2 kB)
  Obtaining dependency information for agate from https://files.pythonhosted.org/packages/20/6e/bbebad0213fce2081902cf7565322b42a5a991c550857cfbb4741f69b8f6/agate-1.7.1-py2.py3-none-any.whl.metadata
  Downloading agate-1.7.1-py2.py3-none-any.whl.metadata (3.1 kB)
Collecting Jinja2<4,>=3.1.3 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for Jinja2<4,>=3.1.3 from https://files.pythonhosted.org/packages/30/6d/6de6be2d02603ab56e72997708809e8a5b0fbfee080735109b40a3564843/Jinja2-3.1.3-py3-none-any.whl.metadata
  Downloading Jinja2-3.1.3-py3-none-any.whl.metadata (3.3 kB)
Collecting mashumaro[msgpack]~=3.9 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for mashumaro[msgpack]~=3.9 from https://files.pythonhosted.org/packages/d6/30/eb3c3738ca98ecfc46624044fa3fa5cae95b80a64d67c79135a2ad172589/mashumaro-3.12-py3-none-any.whl.metadata
  Downloading mashumaro-3.12-py3-none-any.whl.metadata (111 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 111.1/111.1 kB 2.1 MB/s eta 0:00:00
Collecting logbook<1.6,>=1.5 (from dbt-core==1.7.10->dbt-postgres)
  Downloading Logbook-1.5.3.tar.gz (85 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 85.8/85.8 kB ? eta 0:00:00
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Collecting click<9,>=8.0.2 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for click<9,>=8.0.2 from https://files.pythonhosted.org/packages/00/2e/d53fa4befbf2cfa713304affc7ca780ce4fc1fd8710527771b58311a3229/click-8.1.7-py3-none-any.whl.metadata
  Downloading click-8.1.7-py3-none-any.whl.metadata (3.0 kB)
Collecting networkx<4,>=2.3 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for networkx<4,>=2.3 from https://files.pythonhosted.org/packages/d5/f0/8fbc882ca80cf077f1b246c0e3c3465f7f415439bdea6b899f6b19f61f70/networkx-3.2.1-py3-none-any.whl.metadata
  Downloading networkx-3.2.1-py3-none-any.whl.metadata (5.2 kB)
Requirement already satisfied: colorama<0.5,>=0.3.9 in c:\users\chait\appdata\local\programs\python\python312\lib\site-packages (from dbt-core==1.7.10->dbt-postgres) (0.4.6)
Collecting pathspec<0.12,>=0.9 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for pathspec<0.12,>=0.9 from https://files.pythonhosted.org/packages/b4/2a/9b1be29146139ef459188f5e420a66e835dda921208db600b7037093891f/pathspec-0.11.2-py3-none-any.whl.metadata
  Downloading pathspec-0.11.2-py3-none-any.whl.metadata (19 kB)
Collecting isodate<0.7,>=0.6 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for isodate<0.7,>=0.6 from https://files.pythonhosted.org/packages/b6/85/7882d311924cbcfc70b1890780763e36ff0b140c7e51c110fc59a532f087/isodate-0.6.1-py2.py3-none-any.whl.metadata
  Downloading isodate-0.6.1-py2.py3-none-any.whl.metadata (9.6 kB)
Collecting sqlparse<0.5,>=0.2.3 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for sqlparse<0.5,>=0.2.3 from https://files.pythonhosted.org/packages/98/5a/66d7c9305baa9f11857f247d4ba761402cea75db6058ff850ed7128957b7/sqlparse-0.4.4-py3-none-any.whl.metadata
  Downloading sqlparse-0.4.4-py3-none-any.whl.metadata (4.0 kB)
Collecting dbt-extractor~=0.5.0 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for dbt-extractor~=0.5.0 from https://files.pythonhosted.org/packages/8c/ad/fa331537dbe97250dda06342775891ae2b1fb8b54cf9219e47781f641657/dbt_extractor-0.5.1-cp38-abi3-win_amd64.whl.metadata
  Downloading dbt_extractor-0.5.1-cp38-abi3-win_amd64.whl.metadata (4.3 kB)
Collecting minimal-snowplow-tracker~=0.0.2 (from dbt-core==1.7.10->dbt-postgres)
  Downloading minimal-snowplow-tracker-0.0.2.tar.gz (12 kB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Collecting dbt-semantic-interfaces~=0.4.2 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for dbt-semantic-interfaces~=0.4.2 from https://files.pythonhosted.org/packages/9d/a8/718950dfc5975f49f5b05cd3604d266a5d68c37e2e2e95d353363d33a01c/dbt_semantic_interfaces-0.4.4-py3-none-any.whl.metadata
  Downloading dbt_semantic_interfaces-0.4.4-py3-none-any.whl.metadata (2.5 kB)
Collecting jsonschema>=3.0 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for jsonschema>=3.0 from https://files.pythonhosted.org/packages/39/9d/b035d024c62c85f2e2d4806a59ca7b8520307f34e0932fbc8cc75fe7b2d9/jsonschema-4.21.1-py3-none-any.whl.metadata
  Downloading jsonschema-4.21.1-py3-none-any.whl.metadata (7.8 kB)
Requirement already satisfied: packaging>20.9 in c:\users\chait\appdata\local\programs\python\python312\lib\site-packages (from dbt-core==1.7.10->dbt-postgres) (23.2)
Collecting protobuf<5,>=4.0.0 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for protobuf<5,>=4.0.0 from https://files.pythonhosted.org/packages/ad/6e/1bed3b7c904cc178cb8ee8dbaf72934964452b3de95b7a63412591edb93c/protobuf-4.25.3-cp310-abi3-win_amd64.whl.metadata
  Downloading protobuf-4.25.3-cp310-abi3-win_amd64.whl.metadata (541 bytes)
Collecting pytz>=2015.7 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for pytz>=2015.7 from https://files.pythonhosted.org/packages/9c/3d/a121f284241f08268b21359bd425f7d4825cffc5ac5cd0e1b3d82ffd2b10/pytz-2024.1-py2.py3-none-any.whl.metadata
  Downloading pytz-2024.1-py2.py3-none-any.whl.metadata (22 kB)
Collecting pyyaml>=6.0 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for pyyaml>=6.0 from https://files.pythonhosted.org/packages/2b/9f/fbade56564ad486809c27b322d0f7e6a89c01f6b4fe208402e90d4443a99/PyYAML-6.0.1-cp312-cp312-win_amd64.whl.metadata
  Downloading PyYAML-6.0.1-cp312-cp312-win_amd64.whl.metadata (2.1 kB)
Collecting typing-extensions>=3.7.4 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for typing-extensions>=3.7.4 from https://files.pythonhosted.org/packages/f9/de/dc04a3ea60b22624b51c703a84bbe0184abcd1d0b9bc8074b5d6b7ab90bb/typing_extensions-4.10.0-py3-none-any.whl.metadata
  Downloading typing_extensions-4.10.0-py3-none-any.whl.metadata (3.0 kB)
Requirement already satisfied: cffi<2.0.0,>=1.9 in c:\users\chait\appdata\local\programs\python\python312\lib\site-packages (from dbt-core==1.7.10->dbt-postgres) (1.16.0)
Requirement already satisfied: idna<4,>=2.5 in c:\users\chait\appdata\local\programs\python\python312\lib\site-packages (from dbt-core==1.7.10->dbt-postgres) (3.4)
Collecting requests<3.0.0 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for requests<3.0.0 from https://files.pythonhosted.org/packages/70/8e/0e2d847013cb52cd35b38c009bb167a1a26b2ce6cd6965bf26b47bc0bf44/requests-2.31.0-py3-none-any.whl.metadata
  Downloading requests-2.31.0-py3-none-any.whl.metadata (4.6 kB)
Collecting urllib3~=1.0 (from dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for urllib3~=1.0 from https://files.pythonhosted.org/packages/b0/53/aa91e163dcfd1e5b82d8a890ecf13314e3e149c05270cc644581f77f17fd/urllib3-1.26.18-py2.py3-none-any.whl.metadata
  Downloading urllib3-1.26.18-py2.py3-none-any.whl.metadata (48 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 48.9/48.9 kB 2.4 MB/s eta 0:00:00
Collecting Babel>=2.0 (from agate->dbt-postgres)
  Obtaining dependency information for Babel>=2.0 from https://files.pythonhosted.org/packages/0d/35/4196b21041e29a42dc4f05866d0c94fa26c9da88ce12c38c2265e42c82fb/Babel-2.14.0-py3-none-any.whl.metadata
  Downloading Babel-2.14.0-py3-none-any.whl.metadata (1.6 kB)
Collecting leather>=0.3.2 (from agate->dbt-postgres)
  Obtaining dependency information for leather>=0.3.2 from https://files.pythonhosted.org/packages/a1/30/9ec597c962c5249ebd5c580386e4b5f2884cd943af42634291ee3b406415/leather-0.4.0-py2.py3-none-any.whl.metadata
  Downloading leather-0.4.0-py2.py3-none-any.whl.metadata (2.8 kB)
Collecting parsedatetime!=2.5,>=2.1 (from agate->dbt-postgres)
  Obtaining dependency information for parsedatetime!=2.5,>=2.1 from https://files.pythonhosted.org/packages/9d/a4/3dd804926a42537bf69fb3ebb9fd72a50ba84f807d95df5ae016606c976c/parsedatetime-2.6-py3-none-any.whl.metadata
  Downloading parsedatetime-2.6-py3-none-any.whl.metadata (4.7 kB)
Collecting python-slugify>=1.2.1 (from agate->dbt-postgres)
  Obtaining dependency information for python-slugify>=1.2.1 from https://files.pythonhosted.org/packages/a4/62/02da182e544a51a5c3ccf4b03ab79df279f9c60c5e82d5e8bec7ca26ac11/python_slugify-8.0.4-py2.py3-none-any.whl.metadata
  Downloading python_slugify-8.0.4-py2.py3-none-any.whl.metadata (8.5 kB)
Collecting pytimeparse>=1.1.5 (from agate->dbt-postgres)
  Obtaining dependency information for pytimeparse>=1.1.5 from https://files.pythonhosted.org/packages/1b/b4/afd75551a3b910abd1d922dbd45e49e5deeb4d47dc50209ce489ba9844dd/pytimeparse-1.1.8-py2.py3-none-any.whl.metadata
  Downloading pytimeparse-1.1.8-py2.py3-none-any.whl.metadata (3.4 kB)
Requirement already satisfied: pycparser in c:\users\chait\appdata\local\programs\python\python312\lib\site-packages (from cffi<2.0.0,>=1.9->dbt-core==1.7.10->dbt-postgres) (2.21)
Collecting importlib-metadata~=6.0 (from dbt-semantic-interfaces~=0.4.2->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for importlib-metadata~=6.0 from https://files.pythonhosted.org/packages/59/9b/ecce94952ab5ea74c31dcf9ccf78ccd484eebebef06019bf8cb579ab4519/importlib_metadata-6.11.0-py3-none-any.whl.metadata
  Downloading importlib_metadata-6.11.0-py3-none-any.whl.metadata (4.9 kB)
Collecting more-itertools<11.0,>=8.0 (from dbt-semantic-interfaces~=0.4.2->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for more-itertools<11.0,>=8.0 from https://files.pythonhosted.org/packages/50/e2/8e10e465ee3987bb7c9ab69efb91d867d93959095f4807db102d07995d94/more_itertools-10.2.0-py3-none-any.whl.metadata
  Downloading more_itertools-10.2.0-py3-none-any.whl.metadata (34 kB)
Collecting pydantic<3,>=1.10 (from dbt-semantic-interfaces~=0.4.2->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for pydantic<3,>=1.10 from https://files.pythonhosted.org/packages/e5/f3/8296f550276194a58c5500d55b19a27ae0a5a3a51ffef66710c58544b32d/pydantic-2.6.4-py3-none-any.whl.metadata
  Downloading pydantic-2.6.4-py3-none-any.whl.metadata (85 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 85.1/85.1 kB ? eta 0:00:00
Collecting python-dateutil~=2.0 (from dbt-semantic-interfaces~=0.4.2->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for python-dateutil~=2.0 from https://files.pythonhosted.org/packages/ec/57/56b9bcc3c9c6a792fcbaf139543cee77261f3651ca9da0c93f5c1221264b/python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata
  Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting six (from isodate<0.7,>=0.6->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for six from https://files.pythonhosted.org/packages/d9/5a/e7c31adbe875f2abbb91bd84cf2dc52d792b5a01506781dbcf25c91daf11/six-1.16.0-py2.py3-none-any.whl.metadata
  Downloading six-1.16.0-py2.py3-none-any.whl.metadata (1.8 kB)
Collecting MarkupSafe>=2.0 (from Jinja2<4,>=3.1.3->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for MarkupSafe>=2.0 from https://files.pythonhosted.org/packages/3f/14/c3554d512d5f9100a95e737502f4a2323a1959f6d0d01e0d0997b35f7b10/MarkupSafe-2.1.5-cp312-cp312-win_amd64.whl.metadata
  Downloading MarkupSafe-2.1.5-cp312-cp312-win_amd64.whl.metadata (3.1 kB)
Requirement already satisfied: attrs>=22.2.0 in c:\users\chait\appdata\local\programs\python\python312\lib\site-packages (from jsonschema>=3.0->dbt-core==1.7.10->dbt-postgres) (23.1.0)
Collecting jsonschema-specifications>=2023.03.6 (from jsonschema>=3.0->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for jsonschema-specifications>=2023.03.6 from https://files.pythonhosted.org/packages/ee/07/44bd408781594c4d0a027666ef27fab1e441b109dc3b76b4f836f8fd04fe/jsonschema_specifications-2023.12.1-py3-none-any.whl.metadata
  Downloading jsonschema_specifications-2023.12.1-py3-none-any.whl.metadata (3.0 kB)
Collecting referencing>=0.28.4 (from jsonschema>=3.0->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for referencing>=0.28.4 from https://files.pythonhosted.org/packages/42/8e/ae1de7b12223986e949bdb886c004de7c304b6fa94de5b87c926c1099656/referencing-0.34.0-py3-none-any.whl.metadata
  Downloading referencing-0.34.0-py3-none-any.whl.metadata (2.8 kB)
Collecting rpds-py>=0.7.1 (from jsonschema>=3.0->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for rpds-py>=0.7.1 from https://files.pythonhosted.org/packages/14/8c/e69f5636f4ab6ee0855aef3b16e6c97f8b636e9e04fa5a4bcc75126acb13/rpds_py-0.18.0-cp312-none-win_amd64.whl.metadata
  Downloading rpds_py-0.18.0-cp312-none-win_amd64.whl.metadata (4.2 kB)
Collecting msgpack>=0.5.6 (from mashumaro[msgpack]~=3.9->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for msgpack>=0.5.6 from https://files.pythonhosted.org/packages/72/5c/5facaa9b5d1b3ead831697daacf37d485af312bbe483ac6ecf43a3dd777f/msgpack-1.0.8-cp312-cp312-win_amd64.whl.metadata
  Downloading msgpack-1.0.8-cp312-cp312-win_amd64.whl.metadata (9.4 kB)
Collecting text-unidecode>=1.3 (from python-slugify>=1.2.1->agate->dbt-postgres)
  Obtaining dependency information for text-unidecode>=1.3 from https://files.pythonhosted.org/packages/a6/a5/c0b6468d3824fe3fde30dbb5e1f687b291608f9473681bbf7dabbf5a87d7/text_unidecode-1.3-py2.py3-none-any.whl.metadata
  Downloading text_unidecode-1.3-py2.py3-none-any.whl.metadata (2.4 kB)
Collecting charset-normalizer<4,>=2 (from requests<3.0.0->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for charset-normalizer<4,>=2 from https://files.pythonhosted.org/packages/b6/7c/8debebb4f90174074b827c63242c23851bdf00a532489fba57fef3416e40/charset_normalizer-3.3.2-cp312-cp312-win_amd64.whl.metadata
  Downloading charset_normalizer-3.3.2-cp312-cp312-win_amd64.whl.metadata (34 kB)
Requirement already satisfied: certifi>=2017.4.17 in c:\users\chait\appdata\local\programs\python\python312\lib\site-packages (from requests<3.0.0->dbt-core==1.7.10->dbt-postgres) (2023.7.22)
Collecting zipp>=0.5 (from importlib-metadata~=6.0->dbt-semantic-interfaces~=0.4.2->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for zipp>=0.5 from https://files.pythonhosted.org/packages/c2/0a/ba9d0ee9536d3ef73a3448e931776e658b36f128d344e175bc32b092a8bf/zipp-3.18.1-py3-none-any.whl.metadata
  Downloading zipp-3.18.1-py3-none-any.whl.metadata (3.5 kB)
Collecting annotated-types>=0.4.0 (from pydantic<3,>=1.10->dbt-semantic-interfaces~=0.4.2->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for annotated-types>=0.4.0 from https://files.pythonhosted.org/packages/28/78/d31230046e58c207284c6b2c4e8d96e6d3cb4e52354721b944d3e1ee4aa5/annotated_types-0.6.0-py3-none-any.whl.metadata
  Downloading annotated_types-0.6.0-py3-none-any.whl.metadata (12 kB)
Collecting pydantic-core==2.16.3 (from pydantic<3,>=1.10->dbt-semantic-interfaces~=0.4.2->dbt-core==1.7.10->dbt-postgres)
  Obtaining dependency information for pydantic-core==2.16.3 from https://files.pythonhosted.org/packages/21/58/88e734fd2e5bd894e3eccd41be3169b8292e820ef82337f17ec4291c0668/pydantic_core-2.16.3-cp312-none-win_amd64.whl.metadata
  Downloading pydantic_core-2.16.3-cp312-none-win_amd64.whl.metadata (6.6 kB)
Downloading dbt_postgres-1.7.10-py3-none-any.whl (28 kB)
Downloading dbt_core-1.7.10-py3-none-any.whl (1.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.0/1.0 MB 8.1 MB/s eta 0:00:00
Downloading agate-1.7.1-py2.py3-none-any.whl (97 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 97.1/97.1 kB ? eta 0:00:00
Downloading psycopg2_binary-2.9.9-cp312-cp312-win_amd64.whl (1.2 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 12.3 MB/s eta 0:00:00
Downloading Babel-2.14.0-py3-none-any.whl (11.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.0/11.0 MB 11.5 MB/s eta 0:00:00
Downloading click-8.1.7-py3-none-any.whl (97 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 97.9/97.9 kB 5.5 MB/s eta 0:00:00
Downloading dbt_extractor-0.5.1-cp38-abi3-win_amd64.whl (283 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 283.5/283.5 kB 17.1 MB/s eta 0:00:00
Downloading dbt_semantic_interfaces-0.4.4-py3-none-any.whl (118 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 118.6/118.6 kB ? eta 0:00:00
Downloading isodate-0.6.1-py2.py3-none-any.whl (41 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 41.7/41.7 kB ? eta 0:00:00
Downloading Jinja2-3.1.3-py3-none-any.whl (133 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.2/133.2 kB 7.7 MB/s eta 0:00:00
Downloading jsonschema-4.21.1-py3-none-any.whl (85 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 85.5/85.5 kB 4.7 MB/s eta 0:00:00
Downloading leather-0.4.0-py2.py3-none-any.whl (30 kB)
Downloading networkx-3.2.1-py3-none-any.whl (1.6 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.6/1.6 MB 15.0 MB/s eta 0:00:00
Downloading parsedatetime-2.6-py3-none-any.whl (42 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.5/42.5 kB ? eta 0:00:00
Downloading pathspec-0.11.2-py3-none-any.whl (29 kB)
Downloading protobuf-4.25.3-cp310-abi3-win_amd64.whl (413 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 413.4/413.4 kB 12.6 MB/s eta 0:00:00
Downloading python_slugify-8.0.4-py2.py3-none-any.whl (10 kB)
Downloading pytimeparse-1.1.8-py2.py3-none-any.whl (10.0 kB)
Downloading pytz-2024.1-py2.py3-none-any.whl (505 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 505.5/505.5 kB 16.0 MB/s eta 0:00:00
Downloading PyYAML-6.0.1-cp312-cp312-win_amd64.whl (138 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 138.7/138.7 kB ? eta 0:00:00
Downloading requests-2.31.0-py3-none-any.whl (62 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.6/62.6 kB 3.3 MB/s eta 0:00:00
Downloading sqlparse-0.4.4-py3-none-any.whl (41 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 41.2/41.2 kB ? eta 0:00:00
Downloading typing_extensions-4.10.0-py3-none-any.whl (33 kB)
Downloading urllib3-1.26.18-py2.py3-none-any.whl (143 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 143.8/143.8 kB ? eta 0:00:00
Downloading charset_normalizer-3.3.2-cp312-cp312-win_amd64.whl (100 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 100.4/100.4 kB ? eta 0:00:00
Downloading importlib_metadata-6.11.0-py3-none-any.whl (23 kB)
Downloading jsonschema_specifications-2023.12.1-py3-none-any.whl (18 kB)
Downloading MarkupSafe-2.1.5-cp312-cp312-win_amd64.whl (17 kB)
Downloading more_itertools-10.2.0-py3-none-any.whl (57 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 57.0/57.0 kB ? eta 0:00:00
Downloading msgpack-1.0.8-cp312-cp312-win_amd64.whl (75 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 75.3/75.3 kB ? eta 0:00:00
Downloading pydantic-2.6.4-py3-none-any.whl (394 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 394.9/394.9 kB 25.6 MB/s eta 0:00:00
Downloading pydantic_core-2.16.3-cp312-none-win_amd64.whl (1.9 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.9/1.9 MB 14.9 MB/s eta 0:00:00
Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 229.9/229.9 kB 13.7 MB/s eta 0:00:00
Downloading referencing-0.34.0-py3-none-any.whl (26 kB)
Downloading rpds_py-0.18.0-cp312-none-win_amd64.whl (206 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 206.3/206.3 kB 12.3 MB/s eta 0:00:00
Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
Downloading text_unidecode-1.3-py2.py3-none-any.whl (78 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.2/78.2 kB 4.5 MB/s eta 0:00:00
Downloading mashumaro-3.12-py3-none-any.whl (89 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 89.9/89.9 kB ? eta 0:00:00
Downloading annotated_types-0.6.0-py3-none-any.whl (12 kB)
Downloading zipp-3.18.1-py3-none-any.whl (8.2 kB)
Building wheels for collected packages: logbook, minimal-snowplow-tracker
  Building wheel for logbook (pyproject.toml) ... done
  Created wheel for logbook: filename=Logbook-1.5.3-cp312-cp312-win_amd64.whl size=65622 sha256=c6605c0972ddf46b3930fc56f6d68617bf19f808a5c25d71440f0455a2abd383
  Stored in directory: c:\users\chait\appdata\local\pip\cache\wheels\b2\ca\b9\fccfcd6859915cb89f0e22dcf66ddf4ae865a65a1d0b7000ec
  Building wheel for minimal-snowplow-tracker (pyproject.toml) ... done
  Created wheel for minimal-snowplow-tracker: filename=minimal_snowplow_tracker-0.0.2-py3-none-any.whl size=17818 sha256=1287b4630a27e133c17877db9ecc2c5f87919bbee35e2e3a02e46fddd6e74101
  Stored in directory: c:\users\chait\appdata\local\pip\cache\wheels\b3\56\35\ccc6c66312dd3e94b8346df1691c3e68fefb912f98dfad4d83
Successfully built logbook minimal-snowplow-tracker
Installing collected packages: text-unidecode, pytz, pytimeparse, parsedatetime, logbook, leather, zipp, urllib3, typing-extensions, sqlparse, six, rpds-py, pyyaml, python-slugify, psycopg2-binary, protobuf, pathspec, networkx, msgpack, more-itertools, MarkupSafe, dbt-extractor, click, charset-normalizer, Babel, annotated-types, requests, referencing, python-dateutil, pydantic-core, mashumaro, Jinja2, isodate, importlib-metadata, pydantic, minimal-snowplow-tracker, jsonschema-specifications, agate, jsonschema, dbt-semantic-interfaces, dbt-core, dbt-postgres
  Attempting uninstall: urllib3
    Found existing installation: urllib3 2.0.6
    Uninstalling urllib3-2.0.6:
      Successfully uninstalled urllib3-2.0.6
Successfully installed Babel-2.14.0 Jinja2-3.1.3 MarkupSafe-2.1.5 agate-1.7.1 annotated-types-0.6.0 charset-normalizer-3.3.2 click-8.1.7 dbt-core-1.7.10 dbt-extractor-0.5.1 dbt-postgres-1.7.10 dbt-semantic-interfaces-0.4.4 importlib-metadata-6.11.0 isodate-0.6.1 jsonschema-4.21.1 jsonschema-specifications-2023.12.1 leather-0.4.0 logbook-1.5.3 mashumaro-3.12 minimal-snowplow-tracker-0.0.2 more-itertools-10.2.0 msgpack-1.0.8 networkx-3.2.1 parsedatetime-2.6 pathspec-0.11.2 protobuf-4.25.3 psycopg2-binary-2.9.9 pydantic-2.6.4 pydantic-core-2.16.3 python-dateutil-2.9.0.post0 python-slugify-8.0.4 pytimeparse-1.1.8 pytz-2024.1 pyyaml-6.0.1 referencing-0.34.0 requests-2.31.0 rpds-py-0.18.0 six-1.16.0 sqlparse-0.4.4 text-unidecode-1.3 typing-extensions-4.10.0 urllib3-1.26.18 zipp-3.18.1

[notice] A new release of pip is available: 23.2.1 -> 24.0
[notice] To update, run: python.exe -m pip install --upgrade pip
PS C:\Users\chait\docker_tutorial\elt> dbt --version
Core:
  - installed: 1.7.10
  - latest:    1.7.10 - Up to date!

Plugins:
  - postgres: 1.7.10 - Up to date!


PS C:\Users\chait\docker_tutorial\elt> dbt --version
Core:
  - installed: 1.7.10
  - latest:    1.7.10 - Up to date!

Plugins:
  - postgres: 1.7.10 - Up to date!


PS C:\Users\chait\docker_tutorial\elt> dbt init
13:46:58  Running with dbt=1.7.10
13:46:58  [ConfigFolderDirectory]: Unable to parse dict {'dir': WindowsPath('C:/Users/chait/.dbt')}
13:46:58  Creating dbt configuration folder at
Enter a name for your project (letters, digits, underscore): 13:47:39  Encountered an error:

13:47:39  Traceback (most recent call last):
  File "C:\Users\chait\AppData\Local\Programs\Python\Python312\Lib\site-packages\dbt\cli\requires.py", line 91, in wrapper
    result, success = func(*args, **kwargs)
                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\chait\AppData\Local\Programs\Python\Python312\Lib\site-packages\dbt\cli\requires.py", line 76, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\chait\AppData\Local\Programs\Python\Python312\Lib\site-packages\dbt\cli\main.py", line 515, in init
    results = task.run()
              ^^^^^^^^^^
  File "C:\Users\chait\AppData\Local\Programs\Python\Python312\Lib\site-packages\dbt\task\init.py", line 322, in run
    project_name = self.get_valid_project_name()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\chait\AppData\Local\Programs\Python\Python312\Lib\site-packages\dbt\task\init.py", line 276, in get_valid_project_name
    name = click.prompt("Enter a name for your project (letters, digits, underscore)")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\chait\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\termui.py", line 164, in prompt
    value = prompt_func(prompt)
            ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\chait\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\termui.py", line 147, in prompt_func
    raise Abort() from None
click.exceptions.Abort

PS C:\Users\chait\docker_tutorial\elt> dbt init
13:51:17  Running with dbt=1.7.10
Enter a name for your project (letters, digits, underscore): ELT
13:51:44  A project called ELT already exists here.
PS C:\Users\chait\docker_tutorial\elt> dbt init
13:52:09  Running with dbt=1.7.10
Enter a name for your project (letters, digits, underscore): Data_Engineering
13:52:15
Your new dbt project "Data_Engineering" was created!

For more information on how to configure the profiles.yml file,
please consult the dbt documentation here:

  https://docs.getdbt.com/docs/configure-your-profile

One more thing:

Need help? Don't hesitate to reach out to us via GitHub issues or on Slack:

  https://community.getdbt.com/

Happy modeling!

13:52:15  Setting up your profile.
Which database would you like to use?
[1] postgres

(Don't see the one you want? https://docs.getdbt.com/docs/available-adapters)

Enter a number: 1
host (hostname for the instance): destination_postgres
port [5432]: 5432
user (dev username): postgres
pass (dev password):
dbname (default database that dbt will build objects in): destination_db
schema (default schema that dbt will build objects in): postgres
threads (1 or more) [1]: 1
13:55:00  Profile Data_Engineering written to C:\Users\chait\.dbt\profiles.yml using target's profile_template.yml and your supplied values. Run 'dbt debug' to validate the connection.
PS C:\Users\chait\docker_tutorial\elt> docker compose -v

Usage:  docker compose [OPTIONS] COMMAND

Define and run multi-container applications with Docker

Options:
      --ansi string                Control when to print ANSI control
                                   characters ("never"|"always"|"auto")
                                   (default "auto")
      --compatibility              Run compose in backward compatibility mode
      --dry-run                    Execute command in dry run mode
      --env-file stringArray       Specify an alternate environment file
  -f, --file stringArray           Compose configuration files
      --parallel int               Control max parallelism, -1 for
                                   unlimited (default -1)
      --profile stringArray        Specify a profile to enable
      --progress string            Set type of progress output (auto,
                                   tty, plain, quiet) (default "auto")
      --project-directory string   Specify an alternate working directory
                                   (default: the path of the, first
                                   specified, Compose file)
  -p, --project-name string        Project name

Commands:
  attach      Attach local standard input, output, and error streams to a service's running container
  build       Build or rebuild services
  config      Parse, resolve and render compose file in canonical format
  cp          Copy files/folders between a service container and the local filesystem
  create      Creates containers for a service
  down        Stop and remove containers, networks
  events      Receive real time events from containers
  exec        Execute a command in a running container
  images      List images used by the created containers
  kill        Force stop service containers
  logs        View output from containers
  ls          List running compose projects
  pause       Pause services
  port        Print the public port for a port binding
  ps          List containers
  pull        Pull service images
  push        Push service images
  restart     Restart service containers
  rm          Removes stopped service containers
  run         Run a one-off command on a service
  scale       Scale services
  start       Start services
  stats       Display a live stream of container(s) resource usage statistics
  stop        Stop services
  top         Display the running processes
  unpause     Unpause services
  up          Create and start containers
  version     Show the Docker Compose version information
  wait        Block until the first service container stops
  watch       Watch build context for service and rebuild/refresh containers when files are updated

Run 'docker compose COMMAND --help' for more information on a command.
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 4/4
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.3s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 1/1
 ✘ dbt Error                                                                                                                    2.2s
Error response from daemon: manifest unknown
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 1/1
 ✘ dbt Error                                                                                                                    1.6s
Error response from daemon: manifest unknown
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 1/1
 ✘ dbt Error                                                                                                                    1.7s
Error response from daemon: manifest unknown
PS C:\Users\chait\docker_tutorial\elt> dbt --version
Core:
  - installed: 1.7.10
  - latest:    1.7.10 - Up to date!

Plugins:
  - postgres: 1.7.10 - Up to date!


PS C:\Users\chait\docker_tutorial\elt> dbt --version
Core:
  - installed: 1.7.10
  - latest:    1.7.10 - Up to date!

Plugins:
  - postgres: 1.7.10 - Up to date!


PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 10/10
 ✔ dbt 9 layers [⣿⣿⣿⣿⣿⣿⣿⣿⣿]      0B/0B      Pulled                                                                             27.2s
   ✔ bd159e379b3b Pull complete                                                                                                 9.5s
   ✔ de08aeb7fd50 Pull complete                                                                                                 2.1s
   ✔ 30527e10f55a Pull complete                                                                                                 1.9s
   ✔ 693e7a5ba2a8 Pull complete                                                                                                 2.8s
   ✔ c7b6f7685fa5 Pull complete                                                                                                 7.3s
   ✔ 549e764163f4 Pull complete                                                                                                20.7s
   ✔ 98867aeb4fd9 Pull complete                                                                                                 9.3s
   ✔ 6dc14e270c5e Pull complete                                                                                                10.2s
   ✔ d6583d302d30 Pull complete                                                                                                25.4s
[+] Building 0.0s (0/0)  docker:default
[+] Building 3.0s (9/9) FINISHED                                                                                      docker:default
 => [elt_script internal] load build definition from Dockerfile                                                                 0.0s
 => => transferring dockerfile: 180B                                                                                            0.0s
 => [elt_script internal] load metadata for docker.io/library/python:3.8-slim                                                   2.8s
 => [elt_script auth] library/python:pull token for registry-1.docker.io                                                        0.0s
 => [elt_script internal] load .dockerignore                                                                                    0.0s
 => => transferring context: 2B                                                                                                 0.0s
 => [elt_script 1/3] FROM docker.io/library/python:3.8-slim@sha256:95bfecec648356cdd0b28c8b00ce00009baff10c99d1126a82d1aca7164  0.0s
 => [elt_script internal] load build context                                                                                    0.0s
 => => transferring context: 1.91kB                                                                                             0.0s
 => CACHED [elt_script 2/3] RUN apt-get update && apt-get install -y postgresql-client                                          0.0s
 => [elt_script 3/3] COPY elt_script.py .                                                                                       0.0s
 => [elt_script] exporting to image                                                                                             0.1s
 => => exporting layers                                                                                                         0.0s
 => => writing image sha256:3047e2a63f61ec1eb83fca82cae697dace33e669c940d5d48fe2cd31d47a9ab6                                    0.0s
 => => naming to docker.io/library/elt-elt_script                                                                               0.0s
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  |
source_postgres-1       | This user must also own the server process.
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       |
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default text search configuration will be set to "english".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  |
source_postgres-1       | The default text search configuration will be set to "english".
destination_postgres-1  | Data page checksums are disabled.
source_postgres-1       |
destination_postgres-1  |
source_postgres-1       | Data page checksums are disabled.
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       |
destination_postgres-1  | creating subdirectories ... ok
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
destination_postgres-1  | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
source_postgres-1       | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
source_postgres-1       | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
source_postgres-1       | waiting for server to start....2024-03-24 15:23:28.134 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:23:28.137 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | waiting for server to start....2024-03-24 15:23:28.138 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 15:23:28.142 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 15:23:28.146 UTC [51] LOG:  database system was shut down at 2024-03-24 15:23:27 UTC
source_postgres-1       | 2024-03-24 15:23:28.152 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 15:23:28.153 UTC [51] LOG:  database system was shut down at 2024-03-24 15:23:27 UTC
destination_postgres-1  | 2024-03-24 15:23:28.159 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down...2024-03-24 15:23:28.313 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | .2024-03-24 15:23:28.316 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 15:23:28.317 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 15:23:28.317 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 15:23:28.320 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 15:23:28.395 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 15:23:28.398 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 15:23:28.399 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 15:23:28.399 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 15:23:28.402 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | 2024-03-24 15:23:28.527 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.012 s, sync=0.187 s, total=0.210 s; sync files=301, longest=0.023 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 15:23:28.531 UTC [48] LOG:  database system is shut down
source_postgres-1       | 2024-03-24 15:23:28.552 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.127 s, total=0.153 s; sync files=315, longest=0.029 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 15:23:28.555 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 15:23:28.612 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:23:28.612 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 15:23:28.612 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
source_postgres-1       | 2024-03-24 15:23:28.616 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  |
source_postgres-1       | 2024-03-24 15:23:28.621 UTC [66] LOG:  database system was shut down at 2024-03-24 15:23:28 UTC
source_postgres-1       | 2024-03-24 15:23:28.626 UTC [1] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 15:23:28.630 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 15:23:28.630 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 15:23:28.630 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 15:23:28.636 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 15:23:28.643 UTC [64] LOG:  database system was shut down at 2024-03-24 15:23:28 UTC
destination_postgres-1  | 2024-03-24 15:23:28.648 UTC [1] LOG:  database system is ready to accept connections
dbt-1                   | 15:23:29  Running with dbt=1.5.8
dbt-1                   | 15:23:29  Registered adapter: postgres=1.5.8
dbt-1                   | 15:23:29  Unable to do partial parsing because saved manifest not found. Starting full parse.
dbt-1                   | 15:23:29  Encountered an error:
dbt-1                   | Parsing Error
dbt-1                   |   Invalid models config given in models/example/schema.yml @ models: {'name': 'actors', 'description': 'This table contains details about actors.', 'columns': [{'name': 'actor_id', 'description': 'Unique identifier for the actor.', 'tests': ['unique', 'not_null']}, {'name': 'name', 'description': 'First name of the actor.', 'tests': None}], 'original_file_path': 'models/example/schema.yml', 'yaml_key': 'models', 'package_name': 'custom_postgres'} - at path ['columns'][1]['tests']: None is not of type 'array'
dbt-1 exited with code 2
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
destination_postgres-1  | 2024-03-24 15:28:28.686 UTC [62] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 15:28:28.712 UTC [64] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 15:28:33.684 UTC [64] LOG:  checkpoint complete: wrote 52 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.937 s, sync=0.020 s, total=4.973 s; sync files=18, longest=0.009 s, average=0.002 s; distance=252 kB, estimate=252 kB
destination_postgres-1  | 2024-03-24 15:28:40.223 UTC [62] LOG:  checkpoint complete: wrote 117 buffers (0.7%); 0 WAL file(s) added, 0 removed, 0 recycled; write=11.482 s, sync=0.040 s, total=11.538 s; sync files=66, longest=0.006 s, average=0.001 s; distance=505 kB, estimate=505 kB
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.6s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.5s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | waiting for server to start....2024-03-24 15:30:16.219 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:30:16.223 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 15:30:16.236 UTC [51] LOG:  database system was shut down at 2024-03-24 15:30:15 UTC
source_postgres-1       | 2024-03-24 15:30:16.242 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | waiting for server to start....2024-03-24 15:30:16.301 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  | 2024-03-24 15:30:16.304 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 15:30:16.311 UTC [51] LOG:  database system was shut down at 2024-03-24 15:30:15 UTC
destination_postgres-1  | 2024-03-24 15:30:16.316 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down...2024-03-24 15:30:16.460 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
destination_postgres-1  | .2024-03-24 15:30:16.463 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 15:30:16.463 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | 2024-03-24 15:30:16.464 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 15:30:16.464 UTC [49] LOG:  shutting down
source_postgres-1       | waiting for server to shut down....2024-03-24 15:30:16.466 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 15:30:16.467 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 15:30:16.467 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 15:30:16.468 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | 2024-03-24 15:30:16.470 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | 2024-03-24 15:30:16.630 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.021 s, sync=0.125 s, total=0.166 s; sync files=301, longest=0.035 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 15:30:16.633 UTC [48] LOG:  database system is shut down
source_postgres-1       | 2024-03-24 15:30:16.636 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.140 s, total=0.169 s; sync files=315, longest=0.040 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 15:30:16.639 UTC [48] LOG:  database system is shut down
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 15:30:16.681 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:30:16.681 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 15:30:16.681 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:30:16.681 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 15:30:16.681 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 15:30:16.681 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 15:30:16.686 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 15:30:16.686 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 15:30:16.691 UTC [66] LOG:  database system was shut down at 2024-03-24 15:30:16 UTC
destination_postgres-1  | 2024-03-24 15:30:16.691 UTC [64] LOG:  database system was shut down at 2024-03-24 15:30:16 UTC
source_postgres-1       | 2024-03-24 15:30:16.696 UTC [1] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 15:30:16.696 UTC [1] LOG:  database system is ready to accept connections
dbt-1                   | 15:30:17  Running with dbt=1.5.8
dbt-1                   | 15:30:17  Registered adapter: postgres=1.5.8
dbt-1                   | 15:30:17  Unable to do partial parsing because saved manifest not found. Starting full parse.
dbt-1                   | 15:30:18  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 15:30:18
destination_postgres-1  | 2024-03-24 15:30:18.201 UTC [69] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:30:18.229 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:30:18.245 UTC [70] WARNING:  there is already a transaction in progress
dbt-1                   | 15:30:18  Concurrency: 1 threads (target='dev')
dbt-1                   | 15:30:18
dbt-1                   | 15:30:18  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 15:30:18.347 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:30:18.352 UTC [71] ERROR:  relation "public.actors" does not exist at character 254
destination_postgres-1  | 2024-03-24 15:30:18.352 UTC [71] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:30:18  1 of 4 ERROR creating sql table model public.actors ............................ [ERROR in 0.10s]
dbt-1                   | 15:30:18  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 15:30:18.417 UTC [72] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:30:18.422 UTC [72] ERROR:  relation "public.film_actors" does not exist at character 264
destination_postgres-1  | 2024-03-24 15:30:18.422 UTC [72] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."film_actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:30:18  2 of 4 ERROR creating sql table model public.film_actors ....................... [ERROR in 0.06s]
dbt-1                   | 15:30:18  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 15:30:18.472 UTC [73] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:30:18.475 UTC [73] ERROR:  relation "public.films" does not exist at character 252
destination_postgres-1  | 2024-03-24 15:30:18.475 UTC [73] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.films"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."films__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."films"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:30:18  3 of 4 ERROR creating sql table model public.films ............................. [ERROR in 0.05s]
dbt-1                   | 15:30:18  4 of 4 SKIP relation public.film_ratings ....................................... [SKIP]
destination_postgres-1  | 2024-03-24 15:30:18.500 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 15:30:18
dbt-1                   | 15:30:18  Finished running 4 table models in 0 hours 0 minutes and 0.36 seconds (0.36s).
dbt-1                   | 15:30:18
dbt-1                   | 15:30:18  Completed with 3 errors and 0 warnings:
dbt-1                   | 15:30:18
dbt-1                   | 15:30:18  Database Error in model actors (models/example/actors.sql)
dbt-1                   | 15:30:18    relation "public.actors" does not exist
dbt-1                   | 15:30:18    LINE 12:     SELECT * FROM "destination_db"."public"."actors"
dbt-1                   | 15:30:18                               ^
dbt-1                   | 15:30:18    compiled Code at target/run/custom_postgres/models/example/actors.sql
dbt-1                   | 15:30:18
dbt-1                   | 15:30:18  Database Error in model film_actors (models/example/film_actors.sql)
dbt-1                   | 15:30:18    relation "public.film_actors" does not exist
dbt-1                   | 15:30:18    LINE 12:     SELECT * FROM "destination_db"."public"."film_actors"
dbt-1                   | 15:30:18                               ^
dbt-1                   | 15:30:18    compiled Code at target/run/custom_postgres/models/example/film_actors.sql
dbt-1                   | 15:30:18
dbt-1                   | 15:30:18  Database Error in model films (models/example/films.sql)
dbt-1                   | 15:30:18    relation "public.films" does not exist
dbt-1                   | 15:30:18    LINE 12:     SELECT * FROM "destination_db"."public"."films"
dbt-1                   | 15:30:18                               ^
dbt-1                   | 15:30:18    compiled Code at target/run/custom_postgres/models/example/films.sql
dbt-1                   | 15:30:18
dbt-1                   | 15:30:18  Done. PASS=0 WARN=0 ERROR=3 SKIP=1 TOTAL=4
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1 exited with code 1
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.4s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Building 0.0s (0/0)  docker:default
[+] Building 2.5s (9/9) FINISHED                                                                                      docker:default
 => [elt_script internal] load build definition from Dockerfile                                                                 0.0s
 => => transferring dockerfile: 180B                                                                                            0.0s
 => [elt_script internal] load metadata for docker.io/library/python:3.8-slim                                                   2.3s
 => [elt_script auth] library/python:pull token for registry-1.docker.io                                                        0.0s
 => [elt_script internal] load .dockerignore                                                                                    0.0s
 => => transferring context: 2B                                                                                                 0.0s
 => [elt_script 1/3] FROM docker.io/library/python:3.8-slim@sha256:95bfecec648356cdd0b28c8b00ce00009baff10c99d1126a82d1aca7164  0.0s
 => [elt_script internal] load build context                                                                                    0.0s
 => => transferring context: 35B                                                                                                0.0s
 => CACHED [elt_script 2/3] RUN apt-get update && apt-get install -y postgresql-client                                          0.0s
 => CACHED [elt_script 3/3] COPY elt_script.py .                                                                                0.0s
 => [elt_script] exporting to image                                                                                             0.0s
 => => exporting layers                                                                                                         0.0s
 => => writing image sha256:3047e2a63f61ec1eb83fca82cae697dace33e669c940d5d48fe2cd31d47a9ab6                                    0.0s
 => => naming to docker.io/library/elt-elt_script                                                                               0.0s
[+] Running 5/4
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | waiting for server to start....2024-03-24 15:31:49.838 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 15:31:49.842 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 15:31:49.854 UTC [51] LOG:  database system was shut down at 2024-03-24 15:31:49 UTC
destination_postgres-1  | 2024-03-24 15:31:49.859 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | waiting for server to start....2024-03-24 15:31:49.941 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:31:49.943 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 15:31:49.952 UTC [51] LOG:  database system was shut down at 2024-03-24 15:31:49 UTC
source_postgres-1       | 2024-03-24 15:31:49.957 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down....2024-03-24 15:31:49.991 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | 2024-03-24 15:31:49.993 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 15:31:49.995 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 15:31:49.995 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 15:31:49.997 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       |  done
source_postgres-1       | server started
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
destination_postgres-1  | 2024-03-24 15:31:50.100 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.011 s, sync=0.081 s, total=0.105 s; sync files=301, longest=0.018 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 15:31:50.103 UTC [48] LOG:  database system is shut down
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | 2024-03-24 15:31:50.161 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | waiting for server to shut down....2024-03-24 15:31:50.164 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 15:31:50.165 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 15:31:50.165 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 15:31:50.168 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 15:31:50.216 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 15:31:50.217 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 15:31:50.217 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 15:31:50.223 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 15:31:50.234 UTC [64] LOG:  database system was shut down at 2024-03-24 15:31:50 UTC
destination_postgres-1  | 2024-03-24 15:31:50.240 UTC [1] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 15:31:50.296 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.012 s, sync=0.109 s, total=0.131 s; sync files=315, longest=0.019 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 15:31:50.299 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 15:31:50.381 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:31:50.381 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 15:31:50.381 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 15:31:50.385 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 15:31:50.391 UTC [66] LOG:  database system was shut down at 2024-03-24 15:31:50 UTC
source_postgres-1       | 2024-03-24 15:31:50.396 UTC [1] LOG:  database system is ready to accept connections
dbt-1                   | 15:31:51  Running with dbt=1.5.8
dbt-1                   | 15:31:51  Registered adapter: postgres=1.5.8
dbt-1                   | 15:31:51  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 15:31:51
destination_postgres-1  | 2024-03-24 15:31:51.262 UTC [69] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:31:51.306 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:31:51.317 UTC [70] WARNING:  there is already a transaction in progress
dbt-1                   | 15:31:51  Concurrency: 1 threads (target='dev')
dbt-1                   | 15:31:51
dbt-1                   | 15:31:51  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 15:31:51.410 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:31:51.414 UTC [71] ERROR:  relation "public.actors" does not exist at character 254
destination_postgres-1  | 2024-03-24 15:31:51.414 UTC [71] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:31:51  1 of 4 ERROR creating sql table model public.actors ............................ [ERROR in 0.09s]
dbt-1                   | 15:31:51  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 15:31:51.455 UTC [72] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:31:51.459 UTC [72] ERROR:  relation "public.film_actors" does not exist at character 264
destination_postgres-1  | 2024-03-24 15:31:51.459 UTC [72] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."film_actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:31:51  2 of 4 ERROR creating sql table model public.film_actors ....................... [ERROR in 0.04s]
dbt-1                   | 15:31:51  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 15:31:51.499 UTC [73] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:31:51.502 UTC [73] ERROR:  relation "public.films" does not exist at character 252
destination_postgres-1  | 2024-03-24 15:31:51.502 UTC [73] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.films"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."films__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."films"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:31:51  3 of 4 ERROR creating sql table model public.films ............................. [ERROR in 0.04s]
dbt-1                   | 15:31:51  4 of 4 SKIP relation public.film_ratings ....................................... [SKIP]
destination_postgres-1  | 2024-03-24 15:31:51.523 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 15:31:51
dbt-1                   | 15:31:51  Finished running 4 table models in 0 hours 0 minutes and 0.32 seconds (0.32s).
dbt-1                   | 15:31:51
dbt-1                   | 15:31:51  Completed with 3 errors and 0 warnings:
dbt-1                   | 15:31:51
dbt-1                   | 15:31:51  Database Error in model actors (models/example/actors.sql)
dbt-1                   | 15:31:51    relation "public.actors" does not exist
dbt-1                   | 15:31:51    LINE 12:     SELECT * FROM "destination_db"."public"."actors"
dbt-1                   | 15:31:51                               ^
dbt-1                   | 15:31:51    compiled Code at target/run/custom_postgres/models/example/actors.sql
dbt-1                   | 15:31:51
dbt-1                   | 15:31:51  Database Error in model film_actors (models/example/film_actors.sql)
dbt-1                   | 15:31:51    relation "public.film_actors" does not exist
dbt-1                   | 15:31:51    LINE 12:     SELECT * FROM "destination_db"."public"."film_actors"
dbt-1                   | 15:31:51                               ^
dbt-1                   | 15:31:51    compiled Code at target/run/custom_postgres/models/example/film_actors.sql
dbt-1                   | 15:31:51
dbt-1                   | 15:31:51  Database Error in model films (models/example/films.sql)
dbt-1                   | 15:31:51    relation "public.films" does not exist
dbt-1                   | 15:31:51    LINE 12:     SELECT * FROM "destination_db"."public"."films"
dbt-1                   | 15:31:51                               ^
dbt-1                   | 15:31:51    compiled Code at target/run/custom_postgres/models/example/films.sql
dbt-1                   | 15:31:51
dbt-1                   | 15:31:51  Done. PASS=0 WARN=0 ERROR=3 SKIP=1 TOTAL=4
dbt-1 exited with code 1
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 26/26
 ✔ destination_postgres Pulled                                                                                                 38.1s
 ✔ dbt 9 layers [⣿⣿⣿⣿⣿⣿⣿⣿⣿]      0B/0B      Pulled                                                                             32.3s
   ✔ bd159e379b3b Pull complete                                                                                                13.6s
   ✔ de08aeb7fd50 Pull complete                                                                                                 0.9s
   ✔ 30527e10f55a Pull complete                                                                                                 2.0s
   ✔ 693e7a5ba2a8 Pull complete                                                                                                 1.6s
   ✔ c7b6f7685fa5 Pull complete                                                                                                 4.3s
   ✔ 549e764163f4 Pull complete                                                                                                25.7s
   ✔ 98867aeb4fd9 Pull complete                                                                                                 7.1s
   ✔ 6dc14e270c5e Pull complete                                                                                                 7.9s
   ✔ d6583d302d30 Pull complete                                                                                                17.8s
 ✔ source_postgres 14 layers [⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿]      0B/0B      Pulled                                                           38.1s
   ✔ 8a1e25ce7c4f Already exists                                                                                                0.0s
   ✔ b2be002daccf Pull complete                                                                                                11.3s
   ✔ 71dff0956c31 Pull complete                                                                                                13.3s
   ✔ 962627501404 Pull complete                                                                                                14.8s
   ✔ c23077a7a05a Pull complete                                                                                                16.7s
   ✔ 40632b8e7084 Pull complete                                                                                                17.9s
   ✔ cfbec5f1dac7 Pull complete                                                                                                17.9s
   ✔ d1743de7c97b Pull complete                                                                                                19.1s
   ✔ c9cde040a07c Pull complete                                                                                                30.8s
   ✔ 3a23a8d46005 Pull complete                                                                                                20.5s
   ✔ f499f39f0f2d Pull complete                                                                                                22.0s
   ✔ 2cf0f5381fa5 Pull complete                                                                                                23.1s
   ✔ 89f512733a11 Pull complete                                                                                                23.2s
   ✔ 45deb7326cc7 Pull complete                                                                                                24.2s
2024/03/24 21:08:00 http2: server: error reading preface from client //./pipe/docker_engine: file has already been closed
[+] Building 0.0s (0/0)  docker:default
[+] Building 2.1s (9/9) FINISHED                                                                                      docker:default
 => [elt_script internal] load build definition from Dockerfile                                                                 0.0s
 => => transferring dockerfile: 180B                                                                                            0.0s
 => [elt_script internal] load metadata for docker.io/library/python:3.8-slim                                                   2.0s
 => [elt_script auth] library/python:pull token for registry-1.docker.io                                                        0.0s
 => [elt_script internal] load .dockerignore                                                                                    0.0s
 => => transferring context: 2B                                                                                                 0.0s
 => [elt_script 1/3] FROM docker.io/library/python:3.8-slim@sha256:95bfecec648356cdd0b28c8b00ce00009baff10c99d1126a82d1aca7164  0.0s
 => [elt_script internal] load build context                                                                                    0.0s
 => => transferring context: 35B                                                                                                0.0s
 => CACHED [elt_script 2/3] RUN apt-get update && apt-get install -y postgresql-client                                          0.0s
 => CACHED [elt_script 3/3] COPY elt_script.py .                                                                                0.0s
 => [elt_script] exporting to image                                                                                             0.0s
 => => exporting layers                                                                                                         0.0s
 => => writing image sha256:3047e2a63f61ec1eb83fca82cae697dace33e669c940d5d48fe2cd31d47a9ab6                                    0.0s
 => => naming to docker.io/library/elt-elt_script                                                                               0.0s
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.3s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.3s
 ✔ Container elt-elt_script-1            Created                                                                                0.1s
 ✔ Container elt-dbt-1                   Created                                                                                0.1s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
source_postgres-1       | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
source_postgres-1       | syncing data to disk ... ok
destination_postgres-1  |
source_postgres-1       |
destination_postgres-1  | Success. You can now start the database server using:
source_postgres-1       |
destination_postgres-1  |
source_postgres-1       | Success. You can now start the database server using:
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
destination_postgres-1  |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       |
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | waiting for server to start....2024-03-24 15:38:04.638 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | waiting for server to start....2024-03-24 15:38:04.640 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:38:04.640 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 15:38:04.645 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 15:38:04.651 UTC [51] LOG:  database system was shut down at 2024-03-24 15:38:04 UTC
source_postgres-1       | 2024-03-24 15:38:04.657 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 15:38:04.659 UTC [51] LOG:  database system was shut down at 2024-03-24 15:38:04 UTC
destination_postgres-1  | 2024-03-24 15:38:04.665 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  |  done
destination_postgres-1  | server started
destination_postgres-1  | CREATE DATABASE
source_postgres-1       | CREATE DATABASE
destination_postgres-1  |
source_postgres-1       |
destination_postgres-1  |
source_postgres-1       |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down....2024-03-24 15:38:04.797 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | 2024-03-24 15:38:04.800 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 15:38:04.801 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 15:38:04.802 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 15:38:04.804 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 15:38:04.876 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 15:38:04.879 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 15:38:04.880 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 15:38:04.880 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 15:38:04.884 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | 2024-03-24 15:38:04.989 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.011 s, sync=0.166 s, total=0.188 s; sync files=301, longest=0.025 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 15:38:04.992 UTC [48] LOG:  database system is shut down
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 15:38:05.015 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 15:38:05.015 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 15:38:05.015 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 15:38:05.021 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 15:38:05.031 UTC [64] LOG:  database system was shut down at 2024-03-24 15:38:04 UTC
source_postgres-1       | 2024-03-24 15:38:05.032 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.012 s, sync=0.127 s, total=0.152 s; sync files=315, longest=0.031 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
destination_postgres-1  | 2024-03-24 15:38:05.036 UTC [1] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 15:38:05.036 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 15:38:05.092 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 15:38:05.092 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 15:38:05.092 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 15:38:05.097 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 15:38:05.104 UTC [66] LOG:  database system was shut down at 2024-03-24 15:38:05 UTC
source_postgres-1       | 2024-03-24 15:38:05.109 UTC [1] LOG:  database system is ready to accept connections
dbt-1                   | 15:38:05  Running with dbt=1.5.8
dbt-1                   | 15:38:05  Registered adapter: postgres=1.5.8
dbt-1                   | 15:38:05  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 15:38:05
destination_postgres-1  | 2024-03-24 15:38:05.918 UTC [69] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:38:05.942 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:38:05.954 UTC [70] WARNING:  there is already a transaction in progress
dbt-1                   | 15:38:05  Concurrency: 1 threads (target='dev')
dbt-1                   | 15:38:05
dbt-1                   | 15:38:05  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 15:38:06.042 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:38:06.045 UTC [71] ERROR:  relation "public.actors" does not exist at character 254
destination_postgres-1  | 2024-03-24 15:38:06.045 UTC [71] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:38:06  1 of 4 ERROR creating sql table model public.actors ............................ [ERROR in 0.08s]
dbt-1                   | 15:38:06  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 15:38:06.087 UTC [72] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:38:06.090 UTC [72] ERROR:  relation "public.film_actors" does not exist at character 264
destination_postgres-1  | 2024-03-24 15:38:06.090 UTC [72] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."film_actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:38:06  2 of 4 ERROR creating sql table model public.film_actors ....................... [ERROR in 0.04s]
dbt-1                   | 15:38:06  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 15:38:06.129 UTC [73] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 15:38:06.133 UTC [73] ERROR:  relation "public.films" does not exist at character 252
destination_postgres-1  | 2024-03-24 15:38:06.133 UTC [73] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.films"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."films__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."films"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 15:38:06  3 of 4 ERROR creating sql table model public.films ............................. [ERROR in 0.04s]
dbt-1                   | 15:38:06  4 of 4 SKIP relation public.film_ratings ....................................... [SKIP]
destination_postgres-1  | 2024-03-24 15:38:06.156 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 15:38:06
dbt-1                   | 15:38:06  Finished running 4 table models in 0 hours 0 minutes and 0.29 seconds (0.29s).
dbt-1                   | 15:38:06
dbt-1                   | 15:38:06  Completed with 3 errors and 0 warnings:
dbt-1                   | 15:38:06
dbt-1                   | 15:38:06  Database Error in model actors (models/example/actors.sql)
dbt-1                   | 15:38:06    relation "public.actors" does not exist
dbt-1                   | 15:38:06    LINE 12:     SELECT * FROM "destination_db"."public"."actors"
dbt-1                   | 15:38:06                               ^
dbt-1                   | 15:38:06    compiled Code at target/run/custom_postgres/models/example/actors.sql
dbt-1                   | 15:38:06
dbt-1                   | 15:38:06  Database Error in model film_actors (models/example/film_actors.sql)
dbt-1                   | 15:38:06    relation "public.film_actors" does not exist
dbt-1                   | 15:38:06    LINE 12:     SELECT * FROM "destination_db"."public"."film_actors"
dbt-1                   | 15:38:06                               ^
dbt-1                   | 15:38:06    compiled Code at target/run/custom_postgres/models/example/film_actors.sql
dbt-1                   | 15:38:06
dbt-1                   | 15:38:06  Database Error in model films (models/example/films.sql)
dbt-1                   | 15:38:06    relation "public.films" does not exist
dbt-1                   | 15:38:06    LINE 12:     SELECT * FROM "destination_db"."public"."films"
dbt-1                   | 15:38:06                               ^
dbt-1                   | 15:38:06    compiled Code at target/run/custom_postgres/models/example/films.sql
dbt-1                   | 15:38:06
dbt-1                   | 15:38:06  Done. PASS=0 WARN=0 ERROR=3 SKIP=1 TOTAL=4
dbt-1 exited with code 1
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
destination_postgres-1  | 2024-03-24 15:43:05.055 UTC [62] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 15:43:05.202 UTC [64] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 15:43:10.160 UTC [64] LOG:  checkpoint complete: wrote 52 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.919 s, sync=0.017 s, total=4.958 s; sync files=18, longest=0.007 s, average=0.001 s; distance=252 kB, estimate=252 kB
destination_postgres-1  | 2024-03-24 15:43:16.562 UTC [62] LOG:  checkpoint complete: wrote 117 buffers (0.7%); 0 WAL file(s) added, 0 removed, 0 recycled; write=11.460 s, sync=0.034 s, total=11.508 s; sync files=66, longest=0.003 s, average=0.001 s; distance=505 kB, estimate=505 kB
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
service "dbt" depends on unknown service "elt_script.py"
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
service "dbt" depends on unknown service "elt_script.py"
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.1s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | waiting for server to start....2024-03-24 16:51:56.890 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 16:51:56.893 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 16:51:56.902 UTC [51] LOG:  database system was shut down at 2024-03-24 16:51:56 UTC
source_postgres-1       | 2024-03-24 16:51:56.913 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | CREATE DATABASE
destination_postgres-1  | syncing data to disk ... ok
source_postgres-1       |
destination_postgres-1  |
source_postgres-1       |
destination_postgres-1  |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
source_postgres-1       | CREATE TABLE
destination_postgres-1  | waiting for server to start....2024-03-24 16:51:57.089 UTC [49] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | INSERT 0 14
destination_postgres-1  | 2024-03-24 16:51:57.091 UTC [49] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
destination_postgres-1  | 2024-03-24 16:51:57.106 UTC [52] LOG:  database system was shut down at 2024-03-24 16:51:56 UTC
source_postgres-1       | INSERT 0 39
destination_postgres-1  | 2024-03-24 16:51:57.111 UTC [49] LOG:  database system is ready to accept connections
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 16:51:57.124 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 16:51:57.127 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 16:51:57.128 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 16:51:57.128 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 16:51:57.130 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | 2024-03-24 16:51:57.239 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.011 s, sync=0.090 s, total=0.111 s; sync files=315, longest=0.020 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 16:51:57.242 UTC [48] LOG:  database system is shut down
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down...2024-03-24 16:51:57.248 UTC [49] LOG:  received fast shutdown request
destination_postgres-1  | .2024-03-24 16:51:57.251 UTC [49] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 16:51:57.252 UTC [49] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
destination_postgres-1  | 2024-03-24 16:51:57.252 UTC [50] LOG:  shutting down
destination_postgres-1  | 2024-03-24 16:51:57.255 UTC [50] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 16:51:57.343 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 16:51:57.343 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 16:51:57.343 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 16:51:57.349 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 16:51:57.358 UTC [66] LOG:  database system was shut down at 2024-03-24 16:51:57 UTC
source_postgres-1       | 2024-03-24 16:51:57.363 UTC [1] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 16:51:57.376 UTC [50] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.012 s, sync=0.102 s, total=0.124 s; sync files=301, longest=0.022 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 16:51:57.379 UTC [49] LOG:  database system is shut down
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 16:51:57.468 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 16:51:57.468 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 16:51:57.468 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 16:51:57.473 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 16:51:57.480 UTC [65] LOG:  database system was shut down at 2024-03-24 16:51:57 UTC
destination_postgres-1  | 2024-03-24 16:51:57.485 UTC [1] LOG:  database system is ready to accept connections
dbt-1                   | 16:51:58  Running with dbt=1.5.8
dbt-1                   | 16:51:58  Registered adapter: postgres=1.5.8
dbt-1                   | 16:51:58  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 16:51:58
destination_postgres-1  | 2024-03-24 16:51:58.397 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:51:58.422 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:51:58.433 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 16:51:58  Concurrency: 1 threads (target='dev')
dbt-1                   | 16:51:58
dbt-1                   | 16:51:58  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 16:51:58.513 UTC [72] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:51:58.516 UTC [72] ERROR:  relation "public.actors" does not exist at character 254
destination_postgres-1  | 2024-03-24 16:51:58.516 UTC [72] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 16:51:58  1 of 4 ERROR creating sql table model public.actors ............................ [ERROR in 0.07s]
dbt-1                   | 16:51:58  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 16:51:58.564 UTC [73] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:51:58.569 UTC [73] ERROR:  relation "public.film_actors" does not exist at character 264
destination_postgres-1  | 2024-03-24 16:51:58.569 UTC [73] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."film_actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 16:51:58  2 of 4 ERROR creating sql table model public.film_actors ....................... [ERROR in 0.05s]
dbt-1                   | 16:51:58  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 16:51:58.608 UTC [74] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:51:58.611 UTC [74] ERROR:  relation "public.films" does not exist at character 252
destination_postgres-1  | 2024-03-24 16:51:58.611 UTC [74] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.films"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."films__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."films"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 16:51:58  3 of 4 ERROR creating sql table model public.films ............................. [ERROR in 0.04s]
dbt-1                   | 16:51:58  4 of 4 SKIP relation public.film_ratings ....................................... [SKIP]
destination_postgres-1  | 2024-03-24 16:51:58.633 UTC [75] WARNING:  there is already a transaction in progress
dbt-1                   | 16:51:58
dbt-1                   | 16:51:58  Finished running 4 table models in 0 hours 0 minutes and 0.29 seconds (0.29s).
dbt-1                   | 16:51:58
dbt-1                   | 16:51:58  Completed with 3 errors and 0 warnings:
dbt-1                   | 16:51:58
dbt-1                   | 16:51:58  Database Error in model actors (models/example/actors.sql)
dbt-1                   | 16:51:58    relation "public.actors" does not exist
dbt-1                   | 16:51:58    LINE 12:     SELECT * FROM "destination_db"."public"."actors"
dbt-1                   | 16:51:58                               ^
dbt-1                   | 16:51:58    compiled Code at target/run/custom_postgres/models/example/actors.sql
dbt-1                   | 16:51:58
dbt-1                   | 16:51:58  Database Error in model film_actors (models/example/film_actors.sql)
dbt-1                   | 16:51:58    relation "public.film_actors" does not exist
dbt-1                   | 16:51:58    LINE 12:     SELECT * FROM "destination_db"."public"."film_actors"
dbt-1                   | 16:51:58                               ^
dbt-1                   | 16:51:58    compiled Code at target/run/custom_postgres/models/example/film_actors.sql
dbt-1                   | 16:51:58
dbt-1                   | 16:51:58  Database Error in model films (models/example/films.sql)
dbt-1                   | 16:51:58    relation "public.films" does not exist
dbt-1                   | 16:51:58    LINE 12:     SELECT * FROM "destination_db"."public"."films"
dbt-1                   | 16:51:58                               ^
dbt-1                   | 16:51:58    compiled Code at target/run/custom_postgres/models/example/films.sql
dbt-1                   | 16:51:58
dbt-1                   | 16:51:58  Done. PASS=0 WARN=0 ERROR=3 SKIP=1 TOTAL=4
dbt-1 exited with code 1
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | waiting for server to start....2024-03-24 16:53:42.978 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 16:53:42.982 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 16:53:42.991 UTC [51] LOG:  database system was shut down at 2024-03-24 16:53:42 UTC
destination_postgres-1  | 2024-03-24 16:53:42.997 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | waiting for server to start....2024-03-24 16:53:43.073 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 16:53:43.076 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 16:53:43.085 UTC [51] LOG:  database system was shut down at 2024-03-24 16:53:42 UTC
source_postgres-1       | 2024-03-24 16:53:43.091 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down....2024-03-24 16:53:43.141 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | 2024-03-24 16:53:43.143 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 16:53:43.144 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 16:53:43.145 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 16:53:43.148 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       |  done
source_postgres-1       | server started
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
destination_postgres-1  | 2024-03-24 16:53:43.273 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.018 s, sync=0.094 s, total=0.129 s; sync files=301, longest=0.016 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
source_postgres-1       | CREATE TABLE
destination_postgres-1  | 2024-03-24 16:53:43.276 UTC [48] LOG:  database system is shut down
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 16:53:43.292 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 16:53:43.294 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 16:53:43.295 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 16:53:43.296 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 16:53:43.298 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 16:53:43.358 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 16:53:43.359 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 16:53:43.359 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 16:53:43.365 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 16:53:43.373 UTC [64] LOG:  database system was shut down at 2024-03-24 16:53:43 UTC
destination_postgres-1  | 2024-03-24 16:53:43.378 UTC [1] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 16:53:43.424 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.012 s, sync=0.103 s, total=0.128 s; sync files=315, longest=0.020 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 16:53:43.427 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 16:53:43.510 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 16:53:43.510 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 16:53:43.510 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 16:53:43.515 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 16:53:43.521 UTC [66] LOG:  database system was shut down at 2024-03-24 16:53:43 UTC
source_postgres-1       | 2024-03-24 16:53:43.527 UTC [1] LOG:  database system is ready to accept connections
dbt-1                   | 16:53:44  Running with dbt=1.5.8
dbt-1                   | 16:53:44  Registered adapter: postgres=1.5.8
dbt-1                   | 16:53:44  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 16:53:44
destination_postgres-1  | 2024-03-24 16:53:44.512 UTC [69] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:53:44.541 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:53:44.553 UTC [70] WARNING:  there is already a transaction in progress
dbt-1                   | 16:53:44  Concurrency: 1 threads (target='dev')
dbt-1                   | 16:53:44
dbt-1                   | 16:53:44  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 16:53:44.638 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:53:44.641 UTC [71] ERROR:  relation "public.actors" does not exist at character 254
destination_postgres-1  | 2024-03-24 16:53:44.641 UTC [71] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 16:53:44  1 of 4 ERROR creating sql table model public.actors ............................ [ERROR in 0.08s]
dbt-1                   | 16:53:44  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 16:53:44.684 UTC [72] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:53:44.687 UTC [72] ERROR:  relation "public.film_actors" does not exist at character 264
destination_postgres-1  | 2024-03-24 16:53:44.687 UTC [72] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_actors"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_actors__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."film_actors"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 16:53:44  2 of 4 ERROR creating sql table model public.film_actors ....................... [ERROR in 0.04s]
dbt-1                   | 16:53:44  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 16:53:44.729 UTC [73] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 16:53:44.732 UTC [73] ERROR:  relation "public.films" does not exist at character 252
destination_postgres-1  | 2024-03-24 16:53:44.732 UTC [73] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.films"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."films__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           SELECT * FROM "destination_db"."public"."films"
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 16:53:44  3 of 4 ERROR creating sql table model public.films ............................. [ERROR in 0.04s]
dbt-1                   | 16:53:44  4 of 4 SKIP relation public.film_ratings ....................................... [SKIP]
destination_postgres-1  | 2024-03-24 16:53:44.755 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 16:53:44
dbt-1                   | 16:53:44  Finished running 4 table models in 0 hours 0 minutes and 0.31 seconds (0.31s).
dbt-1                   | 16:53:44
dbt-1                   | 16:53:44  Completed with 3 errors and 0 warnings:
dbt-1                   | 16:53:44
dbt-1                   | 16:53:44  Database Error in model actors (models/example/actors.sql)
dbt-1                   | 16:53:44    relation "public.actors" does not exist
dbt-1                   | 16:53:44    LINE 12:     SELECT * FROM "destination_db"."public"."actors"
dbt-1                   | 16:53:44                               ^
dbt-1                   | 16:53:44    compiled Code at target/run/custom_postgres/models/example/actors.sql
dbt-1                   | 16:53:44
dbt-1                   | 16:53:44  Database Error in model film_actors (models/example/film_actors.sql)
dbt-1                   | 16:53:44    relation "public.film_actors" does not exist
dbt-1                   | 16:53:44    LINE 12:     SELECT * FROM "destination_db"."public"."film_actors"
dbt-1                   | 16:53:44                               ^
dbt-1                   | 16:53:44    compiled Code at target/run/custom_postgres/models/example/film_actors.sql
dbt-1                   | 16:53:44
dbt-1                   | 16:53:44  Database Error in model films (models/example/films.sql)
dbt-1                   | 16:53:44    relation "public.films" does not exist
dbt-1                   | 16:53:44    LINE 12:     SELECT * FROM "destination_db"."public"."films"
dbt-1                   | 16:53:44                               ^
dbt-1                   | 16:53:44    compiled Code at target/run/custom_postgres/models/example/films.sql
dbt-1                   | 16:53:44
dbt-1                   | 16:53:44  Done. PASS=0 WARN=0 ERROR=3 SKIP=1 TOTAL=4
dbt-1 exited with code 1
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.7s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | This user must also own the server process.
source_postgres-1       | The default text search configuration will be set to "english".
destination_postgres-1  |
source_postgres-1       |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | Data page checksums are disabled.
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       |
destination_postgres-1  | The default text search configuration will be set to "english".
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  |
source_postgres-1       | creating subdirectories ... ok
destination_postgres-1  | Data page checksums are disabled.
source_postgres-1       | selecting dynamic shared memory implementation ... posix
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
destination_postgres-1  | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
dependency failed to start: container elt-elt_script-1 has no healthcheck configured
Gracefully stopping... (press Ctrl+C again to force)
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.5s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.6s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | waiting for server to start....2024-03-24 17:00:13.659 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:00:13.662 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:00:13.671 UTC [51] LOG:  database system was shut down at 2024-03-24 17:00:13 UTC
destination_postgres-1  | 2024-03-24 17:00:13.677 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  |  done
destination_postgres-1  | server started
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:00:13.814 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | waiting for server to shut down....2024-03-24 17:00:13.818 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:00:13.819 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:00:13.819 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:00:13.823 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | waiting for server to start....2024-03-24 17:00:13.906 UTC [49] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:00:13.910 UTC [49] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:00:13.921 UTC [52] LOG:  database system was shut down at 2024-03-24 17:00:13 UTC
source_postgres-1       | 2024-03-24 17:00:13.928 UTC [49] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 17:00:13.949 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.015 s, sync=0.103 s, total=0.130 s; sync files=301, longest=0.017 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:00:13.952 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:00:14.031 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:00:14.031 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:00:14.031 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:00:14.036 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:00:14.042 UTC [64] LOG:  database system was shut down at 2024-03-24 17:00:13 UTC
destination_postgres-1  | 2024-03-24 17:00:14.047 UTC [1] LOG:  database system is ready to accept connections
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 17:00:14.135 UTC [49] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 17:00:14.137 UTC [49] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:00:14.138 UTC [49] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
source_postgres-1       | 2024-03-24 17:00:14.139 UTC [50] LOG:  shutting down
source_postgres-1       | 2024-03-24 17:00:14.141 UTC [50] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | 2024-03-24 17:00:14.265 UTC [50] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.014 s, sync=0.101 s, total=0.127 s; sync files=315, longest=0.019 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:00:14.270 UTC [49] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 17:00:14.358 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:00:14.358 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:00:14.358 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 17:00:14.364 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:00:14.371 UTC [67] LOG:  database system was shut down at 2024-03-24 17:00:14 UTC
source_postgres-1       | 2024-03-24 17:00:14.376 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:00:20  Running with dbt=1.5.8
dbt-1                   | 17:00:20  Registered adapter: postgres=1.5.8
dbt-1                   | 17:00:20  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:00:20
destination_postgres-1  | 2024-03-24 17:00:20.694 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:00:20.725 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:00:20.739 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 17:00:20  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:00:20
dbt-1                   | 17:00:20  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:00:20.825 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:00:20  1 of 4 OK created sql table model public.actors ................................ [SELECT 20 in 0.17s]
dbt-1                   | 17:00:20  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:00:20.965 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:00:20  2 of 4 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.06s]
dbt-1                   | 17:00:21  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:00:21.031 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 17:00:21  3 of 4 OK created sql table model public.films ................................. [SELECT 20 in 0.06s]
dbt-1                   | 17:00:21  4 of 4 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:00:21.104 UTC [75] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:00:21.107 UTC [75] ERROR:  syntax error at or near "WITH" at character 665
destination_postgres-1  | 2024-03-24 17:00:21.107 UTC [75] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_ratings"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_ratings__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           WITH films_with_ratings AS (
destination_postgres-1  |           SELECT
destination_postgres-1  |               film_id,
destination_postgres-1  |               title,
destination_postgres-1  |               release_date,
destination_postgres-1  |               price,
destination_postgres-1  |               rating,
destination_postgres-1  |               user_rating,
destination_postgres-1  |               CASE
destination_postgres-1  |                   WHEN user_rating >= 4.5 THEN 'Excellent'
destination_postgres-1  |                   WHEN user_rating >= 4.0 THEN 'Good'
destination_postgres-1  |                   WHEN user_rating >= 3.0 THEN 'Average'
destination_postgres-1  |                   ELSE 'Poor'
destination_postgres-1  |               END as rating_category
destination_postgres-1  |           FROM "destination_db"."public"."films"
destination_postgres-1  |       )
destination_postgres-1  |
destination_postgres-1  |       WITH films_with_actors AS (
destination_postgres-1  |           SELECT
destination_postgres-1  |               f.film_id,
destination_postgres-1  |               f.title,
destination_postgres-1  |               STRING_AGG(a.actor_name,',') AS actors
destination_postgres-1  |           FROM "destination_db"."public"."films"
destination_postgres-1  |           LEFT JOIN "destination_db"."public"."film_actors" fa ON f.film_id = fa.film_id
destination_postgres-1  |           LEFT JOIN "destination_db"."public"."actors" a ON fa.actor_id = a.actor_id
destination_postgres-1  |           GROUP BY f.film_id, f.title
destination_postgres-1  |       )
destination_postgres-1  |
destination_postgres-1  |       SELECT
destination_postgres-1  |           fwf.*,
destination_postgres-1  |           fwa.actors
destination_postgres-1  |       FROM films_with_ratings fwf
destination_postgres-1  |       LEFT JOIN films_with_actors fwa ON fwf.film_id = fwa.film_id
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 17:00:21  4 of 4 ERROR creating sql table model public.film_ratings ...................... [ERROR in 0.05s]
destination_postgres-1  | 2024-03-24 17:00:21.128 UTC [76] WARNING:  there is already a transaction in progress
dbt-1                   | 17:00:21
dbt-1                   | 17:00:21  Finished running 4 table models in 0 hours 0 minutes and 0.49 seconds (0.49s).
dbt-1                   | 17:00:21
dbt-1                   | 17:00:21  Completed with 1 error and 0 warnings:
dbt-1                   | 17:00:21
dbt-1                   | 17:00:21  Database Error in model film_ratings (models/example/film_ratings.sql)
dbt-1                   | 17:00:21    syntax error at or near "WITH"
dbt-1                   | 17:00:21    LINE 29: WITH films_with_actors AS (
dbt-1                   | 17:00:21             ^
dbt-1                   | 17:00:21    compiled Code at target/run/custom_postgres/models/example/film_ratings.sql
dbt-1                   | 17:00:21
dbt-1                   | 17:00:21  Done. PASS=3 WARN=0 ERROR=1 SKIP=0 TOTAL=4
dbt-1 exited with code 1
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.4s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.5s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | waiting for server to start....2024-03-24 17:02:34.942 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:02:34.946 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:02:34.955 UTC [51] LOG:  database system was shut down at 2024-03-24 17:02:34 UTC
source_postgres-1       | 2024-03-24 17:02:34.961 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       |  done
source_postgres-1       | server started
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
destination_postgres-1  | waiting for server to start....2024-03-24 17:02:35.147 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | CREATE TABLE
destination_postgres-1  | 2024-03-24 17:02:35.153 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 17:02:35.164 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | 2024-03-24 17:02:35.167 UTC [51] LOG:  database system was shut down at 2024-03-24 17:02:34 UTC
source_postgres-1       | .2024-03-24 17:02:35.168 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:02:35.169 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 17:02:35.169 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:02:35.172 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 17:02:35.173 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | 2024-03-24 17:02:35.279 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.083 s, total=0.110 s; sync files=315, longest=0.013 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:02:35.283 UTC [48] LOG:  database system is shut down
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down...2024-03-24 17:02:35.310 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | .2024-03-24 17:02:35.312 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:02:35.313 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:02:35.313 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:02:35.315 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 17:02:35.382 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:02:35.382 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:02:35.383 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 17:02:35.388 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:02:35.397 UTC [66] LOG:  database system was shut down at 2024-03-24 17:02:35 UTC
source_postgres-1       | 2024-03-24 17:02:35.404 UTC [1] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 17:02:35.433 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.098 s, total=0.120 s; sync files=301, longest=0.014 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:02:35.438 UTC [48] LOG:  database system is shut down
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:02:35.544 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:02:35.545 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:02:35.545 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:02:35.550 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:02:35.557 UTC [64] LOG:  database system was shut down at 2024-03-24 17:02:35 UTC
destination_postgres-1  | 2024-03-24 17:02:35.561 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:02:41  Running with dbt=1.5.8
dbt-1                   | 17:02:41  Registered adapter: postgres=1.5.8
dbt-1                   | 17:02:42  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:02:42
destination_postgres-1  | 2024-03-24 17:02:42.141 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:02:42.165 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:02:42.178 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 17:02:42  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:02:42
dbt-1                   | 17:02:42  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:02:42.262 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:02:42  1 of 4 OK created sql table model public.actors ................................ [SELECT 20 in 0.12s]
dbt-1                   | 17:02:42  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:02:42.352 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:02:42  2 of 4 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.06s]
dbt-1                   | 17:02:42  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:02:42.425 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 17:02:42  3 of 4 OK created sql table model public.films ................................. [SELECT 20 in 0.07s]
dbt-1                   | 17:02:42  4 of 4 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:02:42.495 UTC [75] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:02:42.499 UTC [75] ERROR:  syntax error at or near "WITH" at character 665
destination_postgres-1  | 2024-03-24 17:02:42.499 UTC [75] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_ratings"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_ratings__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           WITH films_with_ratings AS (
destination_postgres-1  |           SELECT
destination_postgres-1  |               film_id,
destination_postgres-1  |               title,
destination_postgres-1  |               release_date,
destination_postgres-1  |               price,
destination_postgres-1  |               rating,
destination_postgres-1  |               user_rating,
destination_postgres-1  |               CASE
destination_postgres-1  |                   WHEN user_rating >= 4.5 THEN 'Excellent'
destination_postgres-1  |                   WHEN user_rating >= 4.0 THEN 'Good'
destination_postgres-1  |                   WHEN user_rating >= 3.0 THEN 'Average'
destination_postgres-1  |                   ELSE 'Poor'
destination_postgres-1  |               END as rating_category
destination_postgres-1  |           FROM "destination_db"."public"."films"
destination_postgres-1  |       )
destination_postgres-1  |
destination_postgres-1  |       WITH films_with_actors AS (
destination_postgres-1  |           SELECT
destination_postgres-1  |               f.film_id,
destination_postgres-1  |               f.title,
destination_postgres-1  |               STRING_AGG(a.actor_name,',') AS actors
destination_postgres-1  |           FROM "destination_db"."public"."films" f
destination_postgres-1  |           LEFT JOIN "destination_db"."public"."film_actors" fa ON f.film_id = fa.film_id
destination_postgres-1  |           LEFT JOIN "destination_db"."public"."actors" a ON fa.actor_id = a.actor_id
destination_postgres-1  |           GROUP BY f.film_id, f.title
destination_postgres-1  |       )
destination_postgres-1  |
destination_postgres-1  |       SELECT
destination_postgres-1  |           fwf.*,
destination_postgres-1  |           fwa.actors
destination_postgres-1  |       FROM films_with_ratings fwf
destination_postgres-1  |       LEFT JOIN films_with_actors fwa ON fwf.film_id = fwa.film_id
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 17:02:42  4 of 4 ERROR creating sql table model public.film_ratings ...................... [ERROR in 0.04s]
destination_postgres-1  | 2024-03-24 17:02:42.519 UTC [76] WARNING:  there is already a transaction in progress
dbt-1                   | 17:02:42
dbt-1                   | 17:02:42  Finished running 4 table models in 0 hours 0 minutes and 0.44 seconds (0.44s).
dbt-1                   | 17:02:42
dbt-1                   | 17:02:42  Completed with 1 error and 0 warnings:
dbt-1                   | 17:02:42
dbt-1                   | 17:02:42  Database Error in model film_ratings (models/example/film_ratings.sql)
dbt-1                   | 17:02:42    syntax error at or near "WITH"
dbt-1                   | 17:02:42    LINE 29: WITH films_with_actors AS (
dbt-1                   | 17:02:42             ^
dbt-1                   | 17:02:42    compiled Code at target/run/custom_postgres/models/example/film_ratings.sql
dbt-1                   | 17:02:42
dbt-1                   | 17:02:42  Done. PASS=3 WARN=0 ERROR=1 SKIP=0 TOTAL=4
dbt-1 exited with code 1
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.1s
 ✔ Container elt-dbt-1                   Created                                                                                0.1s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | waiting for server to start....2024-03-24 17:04:35.325 UTC [49] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:04:35.329 UTC [49] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:04:35.337 UTC [52] LOG:  database system was shut down at 2024-03-24 17:04:34 UTC
destination_postgres-1  | 2024-03-24 17:04:35.341 UTC [49] LOG:  database system is ready to accept connections
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | waiting for server to start....2024-03-24 17:04:35.465 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:04:35.468 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:04:35.478 UTC [51] LOG:  database system was shut down at 2024-03-24 17:04:35 UTC
source_postgres-1       | 2024-03-24 17:04:35.485 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down...2024-03-24 17:04:35.498 UTC [49] LOG:  received fast shutdown request
destination_postgres-1  | .2024-03-24 17:04:35.500 UTC [49] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:04:35.502 UTC [49] LOG:  background worker "logical replication launcher" (PID 55) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:04:35.502 UTC [50] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:04:35.504 UTC [50] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  | 2024-03-24 17:04:35.615 UTC [50] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.090 s, total=0.113 s; sync files=301, longest=0.013 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:04:35.619 UTC [49] LOG:  database system is shut down
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 17:04:35.686 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 17:04:35.689 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:04:35.690 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 17:04:35.690 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 17:04:35.692 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:04:35.735 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:04:35.735 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:04:35.735 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:04:35.741 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:04:35.749 UTC [65] LOG:  database system was shut down at 2024-03-24 17:04:35 UTC
destination_postgres-1  | 2024-03-24 17:04:35.755 UTC [1] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 17:04:35.813 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.017 s, sync=0.096 s, total=0.124 s; sync files=315, longest=0.014 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:04:35.819 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 17:04:35.916 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:04:35.916 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:04:35.916 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 17:04:35.922 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:04:35.928 UTC [66] LOG:  database system was shut down at 2024-03-24 17:04:35 UTC
source_postgres-1       | 2024-03-24 17:04:35.935 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:04:42  Running with dbt=1.5.8
dbt-1                   | 17:04:42  Registered adapter: postgres=1.5.8
dbt-1                   | 17:04:42  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:04:42
destination_postgres-1  | 2024-03-24 17:04:42.382 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:04:42.406 UTC [72] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:04:42.420 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:04:42  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:04:42
dbt-1                   | 17:04:42  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:04:42.504 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:04:42  1 of 4 OK created sql table model public.actors ................................ [SELECT 20 in 0.12s]
dbt-1                   | 17:04:42  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:04:42.602 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 17:04:42  2 of 4 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.07s]
dbt-1                   | 17:04:42  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:04:42.672 UTC [75] WARNING:  there is already a transaction in progress
dbt-1                   | 17:04:42  3 of 4 OK created sql table model public.films ................................. [SELECT 20 in 0.06s]
dbt-1                   | 17:04:42  4 of 4 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:04:42.748 UTC [76] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:04:42.752 UTC [76] ERROR:  syntax error at or near "films_with_actors" at character 666
destination_postgres-1  | 2024-03-24 17:04:42.752 UTC [76] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_ratings"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_ratings__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           WITH
destination_postgres-1  |       films_with_ratings AS (
destination_postgres-1  |           SELECT
destination_postgres-1  |               film_id,
destination_postgres-1  |               title,
destination_postgres-1  |               release_date,
destination_postgres-1  |               price,
destination_postgres-1  |               rating,
destination_postgres-1  |               user_rating,
destination_postgres-1  |               CASE
destination_postgres-1  |                   WHEN user_rating >= 4.5 THEN 'Excellent'
destination_postgres-1  |                   WHEN user_rating >= 4.0 THEN 'Good'
destination_postgres-1  |                   WHEN user_rating >= 3.0 THEN 'Average'
destination_postgres-1  |                   ELSE 'Poor'
destination_postgres-1  |               END as rating_category
destination_postgres-1  |           FROM "destination_db"."public"."films"
destination_postgres-1  |       )
destination_postgres-1  |
destination_postgres-1  |       films_with_actors AS (
destination_postgres-1  |           SELECT
destination_postgres-1  |               f.film_id,
destination_postgres-1  |               f.title,
destination_postgres-1  |               STRING_AGG(a.actor_name,',') AS actors
destination_postgres-1  |           FROM "destination_db"."public"."films" f
destination_postgres-1  |           LEFT JOIN "destination_db"."public"."film_actors" fa ON f.film_id = fa.film_id
destination_postgres-1  |           LEFT JOIN "destination_db"."public"."actors" a ON fa.actor_id = a.actor_id
destination_postgres-1  |           GROUP BY f.film_id, f.title
destination_postgres-1  |       )
destination_postgres-1  |
destination_postgres-1  |       SELECT
destination_postgres-1  |           fwf.*,
destination_postgres-1  |           fwa.actors
destination_postgres-1  |       FROM films_with_ratings fwf
destination_postgres-1  |       LEFT JOIN films_with_actors fwa ON fwf.film_id = fwa.film_id
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 17:04:42  4 of 4 ERROR creating sql table model public.film_ratings ...................... [ERROR in 0.05s]
destination_postgres-1  | 2024-03-24 17:04:42.773 UTC [77] WARNING:  there is already a transaction in progress
dbt-1                   | 17:04:42
dbt-1                   | 17:04:42  Finished running 4 table models in 0 hours 0 minutes and 0.44 seconds (0.44s).
dbt-1                   | 17:04:42
dbt-1                   | 17:04:42  Completed with 1 error and 0 warnings:
dbt-1                   | 17:04:42
dbt-1                   | 17:04:42  Database Error in model film_ratings (models/example/film_ratings.sql)
dbt-1                   | 17:04:42    syntax error at or near "films_with_actors"
dbt-1                   | 17:04:42    LINE 30: films_with_actors AS (
dbt-1                   | 17:04:42             ^
dbt-1                   | 17:04:42    compiled Code at target/run/custom_postgres/models/example/film_ratings.sql
dbt-1                   | 17:04:42
dbt-1                   | 17:04:42  Done. PASS=3 WARN=0 ERROR=1 SKIP=0 TOTAL=4
dbt-1 exited with code 1
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.1s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | waiting for server to start....2024-03-24 17:07:00.707 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:07:00.710 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
destination_postgres-1  | 2024-03-24 17:07:00.720 UTC [51] LOG:  database system was shut down at 2024-03-24 17:07:00 UTC
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
destination_postgres-1  | 2024-03-24 17:07:00.726 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       | waiting for server to start....2024-03-24 17:07:00.748 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:07:00.751 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:07:00.760 UTC [51] LOG:  database system was shut down at 2024-03-24 17:07:00 UTC
source_postgres-1       | 2024-03-24 17:07:00.764 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down...2024-03-24 17:07:00.865 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | .2024-03-24 17:07:00.868 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:07:00.869 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:07:00.869 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:07:00.871 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 17:07:00.996 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 17:07:01.000 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:07:01.001 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 17:07:01.002 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 17:07:01.004 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | 2024-03-24 17:07:01.014 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.017 s, sync=0.115 s, total=0.145 s; sync files=301, longest=0.012 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:07:01.018 UTC [48] LOG:  database system is shut down
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:07:01.086 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:07:01.086 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:07:01.086 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:07:01.092 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:07:01.102 UTC [64] LOG:  database system was shut down at 2024-03-24 17:07:00 UTC
destination_postgres-1  | 2024-03-24 17:07:01.111 UTC [1] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 17:07:01.149 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.017 s, sync=0.115 s, total=0.148 s; sync files=315, longest=0.017 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:07:01.155 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 17:07:01.222 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:07:01.222 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:07:01.222 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 17:07:01.228 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:07:01.234 UTC [66] LOG:  database system was shut down at 2024-03-24 17:07:01 UTC
source_postgres-1       | 2024-03-24 17:07:01.238 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:07:07  Running with dbt=1.5.8
dbt-1                   | 17:07:07  Registered adapter: postgres=1.5.8
dbt-1                   | 17:07:07  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 310 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:07:07
destination_postgres-1  | 2024-03-24 17:07:07.663 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:07:07.687 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:07:07.699 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 17:07:07  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:07:07
dbt-1                   | 17:07:07  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:07:07.780 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:07:07  1 of 4 OK created sql table model public.actors ................................ [SELECT 20 in 0.12s]
dbt-1                   | 17:07:07  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:07:07.872 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:07:07  2 of 4 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.06s]
dbt-1                   | 17:07:07  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:07:07.940 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 17:07:07  3 of 4 OK created sql table model public.films ................................. [SELECT 20 in 0.06s]
dbt-1                   | 17:07:07  4 of 4 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:07:08.010 UTC [75] WARNING:  there is already a transaction in progress
dbt-1                   | 17:07:08  4 of 4 OK created sql table model public.film_ratings .......................... [SELECT 20 in 0.06s]
destination_postgres-1  | 2024-03-24 17:07:08.052 UTC [76] WARNING:  there is already a transaction in progress
dbt-1                   | 17:07:08
dbt-1                   | 17:07:08  Finished running 4 table models in 0 hours 0 minutes and 0.44 seconds (0.44s).
dbt-1                   | 17:07:08
dbt-1                   | 17:07:08  Completed successfully
dbt-1                   | 17:07:08
dbt-1                   | 17:07:08  Done. PASS=4 WARN=0 ERROR=0 SKIP=0 TOTAL=4
dbt-1 exited with code 0
destination_postgres-1  | 2024-03-24 17:12:01.205 UTC [62] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 17:12:01.342 UTC [64] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 17:12:06.312 UTC [64] LOG:  checkpoint complete: wrote 52 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.936 s, sync=0.018 s, total=4.971 s; sync files=18, longest=0.007 s, average=0.001 s; distance=252 kB, estimate=252 kB
destination_postgres-1  | 2024-03-24 17:12:13.335 UTC [62] LOG:  checkpoint complete: wrote 123 buffers (0.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=12.070 s, sync=0.042 s, total=12.131 s; sync files=72, longest=0.006 s, average=0.001 s; distance=588 kB, estimate=588 kB
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.1s
 ✔ Container elt-dbt-1                   Created                                                                                0.1s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
source_postgres-1       | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | running bootstrap script ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
destination_postgres-1  | waiting for server to start....2024-03-24 17:29:27.868 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | waiting for server to start....2024-03-24 17:29:27.870 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:29:27.871 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:29:27.874 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:29:27.882 UTC [51] LOG:  database system was shut down at 2024-03-24 17:29:27 UTC
destination_postgres-1  | 2024-03-24 17:29:27.887 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 17:29:27.889 UTC [51] LOG:  database system was shut down at 2024-03-24 17:29:27 UTC
source_postgres-1       | 2024-03-24 17:29:27.896 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       |  done
source_postgres-1       | server started
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down...2024-03-24 17:29:28.054 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | .2024-03-24 17:29:28.057 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:29:28.058 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:29:28.059 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:29:28.061 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down....2024-03-24 17:29:28.146 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | 2024-03-24 17:29:28.150 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:29:28.152 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 17:29:28.152 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 17:29:28.156 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | 2024-03-24 17:29:28.263 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.181 s, total=0.204 s; sync files=301, longest=0.026 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:29:28.268 UTC [48] LOG:  database system is shut down
source_postgres-1       | 2024-03-24 17:29:28.295 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.016 s, sync=0.112 s, total=0.143 s; sync files=315, longest=0.020 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:29:28.299 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
destination_postgres-1  |  done
source_postgres-1       |
destination_postgres-1  | server stopped
source_postgres-1       | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
source_postgres-1       |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
source_postgres-1       | 2024-03-24 17:29:28.365 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  |
source_postgres-1       | 2024-03-24 17:29:28.365 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:29:28.371 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:29:28.365 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:29:28.371 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:29:28.371 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:29:28.371 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:29:28.378 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:29:28.380 UTC [66] LOG:  database system was shut down at 2024-03-24 17:29:28 UTC
source_postgres-1       | 2024-03-24 17:29:28.385 UTC [1] LOG:  database system is ready to accept connections
destination_postgres-1  | 2024-03-24 17:29:28.386 UTC [64] LOG:  database system was shut down at 2024-03-24 17:29:28 UTC
destination_postgres-1  | 2024-03-24 17:29:28.392 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:29:34  Running with dbt=1.5.8
dbt-1                   | 17:29:34  Registered adapter: postgres=1.5.8
dbt-1                   | 17:29:34  Found 4 models, 20 tests, 0 snapshots, 0 analyses, 311 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:29:34
destination_postgres-1  | 2024-03-24 17:29:34.751 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:29:34.776 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:29:34.789 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 17:29:34  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:29:34
dbt-1                   | 17:29:34  1 of 4 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:29:34.923 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:29:34  1 of 4 OK created sql table model public.actors ................................ [SELECT 20 in 0.17s]
dbt-1                   | 17:29:34  2 of 4 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:29:35.018 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:29:35  2 of 4 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.10s]
dbt-1                   | 17:29:35  3 of 4 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:29:35.128 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 17:29:35  3 of 4 OK created sql table model public.films ................................. [SELECT 20 in 0.07s]
dbt-1                   | 17:29:35  4 of 4 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:29:35.195 UTC [75] WARNING:  there is already a transaction in progress
dbt-1                   | 17:29:35  4 of 4 OK created sql table model public.film_ratings .......................... [SELECT 20 in 0.06s]
destination_postgres-1  | 2024-03-24 17:29:35.238 UTC [76] WARNING:  there is already a transaction in progress
dbt-1                   | 17:29:35
dbt-1                   | 17:29:35  Finished running 4 table models in 0 hours 0 minutes and 0.54 seconds (0.54s).
dbt-1                   | 17:29:35
dbt-1                   | 17:29:35  Completed successfully
dbt-1                   | 17:29:35
dbt-1                   | 17:29:35  Done. PASS=4 WARN=0 ERROR=0 SKIP=0 TOTAL=4
dbt-1 exited with code 0
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.4s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.1s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | waiting for server to start....2024-03-24 17:30:54.538 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:30:54.541 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:30:54.550 UTC [51] LOG:  database system was shut down at 2024-03-24 17:30:54 UTC
source_postgres-1       | 2024-03-24 17:30:54.556 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | waiting for server to start....2024-03-24 17:30:54.681 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:30:54.684 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
destination_postgres-1  | 2024-03-24 17:30:54.698 UTC [51] LOG:  database system was shut down at 2024-03-24 17:30:54 UTC
destination_postgres-1  | 2024-03-24 17:30:54.704 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 17:30:54.763 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | .2024-03-24 17:30:54.765 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:30:54.766 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 17:30:54.767 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 17:30:54.769 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down....2024-03-24 17:30:54.841 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | 2024-03-24 17:30:54.846 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:30:54.847 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:30:54.847 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:30:54.850 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       | 2024-03-24 17:30:54.929 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.012 s, sync=0.139 s, total=0.163 s; sync files=315, longest=0.015 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:30:54.935 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
destination_postgres-1  | 2024-03-24 17:30:54.970 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.020 s, sync=0.090 s, total=0.123 s; sync files=301, longest=0.009 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:30:54.974 UTC [48] LOG:  database system is shut down
source_postgres-1       | 2024-03-24 17:30:54.981 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:30:54.981 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:30:54.981 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 17:30:54.986 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:30:54.991 UTC [66] LOG:  database system was shut down at 2024-03-24 17:30:54 UTC
source_postgres-1       | 2024-03-24 17:30:54.996 UTC [1] LOG:  database system is ready to accept connections
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:30:55.068 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:30:55.069 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:30:55.069 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:30:55.074 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:30:55.081 UTC [64] LOG:  database system was shut down at 2024-03-24 17:30:54 UTC
destination_postgres-1  | 2024-03-24 17:30:55.087 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:31:01  Running with dbt=1.5.8
dbt-1                   | 17:31:01  Registered adapter: postgres=1.5.8
dbt-1                   | 17:31:01  Found 5 models, 20 tests, 0 snapshots, 0 analyses, 311 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:31:01
destination_postgres-1  | 2024-03-24 17:31:01.609 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:31:01.651 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:31:01.665 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 17:31:01  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:31:01
dbt-1                   | 17:31:01  1 of 5 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:31:01.747 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:31:01  1 of 5 OK created sql table model public.actors ................................ [SELECT 20 in 0.11s]
dbt-1                   | 17:31:01  2 of 5 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:31:01.835 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:31:01  2 of 5 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.06s]
dbt-1                   | 17:31:01  3 of 5 START sql table model public.film_ratings_with_macro .................... [RUN]
destination_postgres-1  | 2024-03-24 17:31:01.907 UTC [74] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:31:01.911 UTC [74] ERROR:  syntax error at or near "generate_film_ratings_with_macro" at character 274
destination_postgres-1  | 2024-03-24 17:31:01.911 UTC [74] STATEMENT:  /* {"app": "dbt", "dbt_version": "1.5.8", "profile_name": "custom_postgres", "target_name": "dev", "node_id": "model.custom_postgres.film_ratings_with_macro"} */
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |         create  table "destination_db"."public"."film_ratings_with_macro__dbt_tmp"
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  |           as
destination_postgres-1  |
destination_postgres-1  |         (
destination_postgres-1  |           generate_film_ratings_with_macro()
destination_postgres-1  |         );
destination_postgres-1  |
dbt-1                   | 17:31:01  3 of 5 ERROR creating sql table model public.film_ratings_with_macro ........... [ERROR in 0.05s]
dbt-1                   | 17:31:01  4 of 5 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:31:01.952 UTC [75] WARNING:  there is already a transaction in progress
dbt-1                   | 17:31:01  4 of 5 OK created sql table model public.films ................................. [SELECT 20 in 0.06s]
dbt-1                   | 17:31:01  5 of 5 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:31:02.020 UTC [76] WARNING:  there is already a transaction in progress
dbt-1                   | 17:31:02  5 of 5 OK created sql table model public.film_ratings .......................... [SELECT 20 in 0.06s]
destination_postgres-1  | 2024-03-24 17:31:02.066 UTC [77] WARNING:  there is already a transaction in progress
dbt-1                   | 17:31:02
dbt-1                   | 17:31:02  Finished running 5 table models in 0 hours 0 minutes and 0.51 seconds (0.51s).
dbt-1                   | 17:31:02
dbt-1                   | 17:31:02  Completed with 1 error and 0 warnings:
dbt-1                   | 17:31:02
dbt-1                   | 17:31:02  Database Error in model film_ratings_with_macro (models/example/film_ratings_with_macro.sql)
dbt-1                   | 17:31:02    syntax error at or near "generate_film_ratings_with_macro"
dbt-1                   | 17:31:02    LINE 12:     generate_film_ratings_with_macro()
dbt-1                   | 17:31:02                 ^
dbt-1                   | 17:31:02    compiled Code at target/run/custom_postgres/models/example/film_ratings_with_macro.sql
dbt-1                   | 17:31:02
dbt-1                   | 17:31:02  Done. PASS=4 WARN=0 ERROR=1 SKIP=0 TOTAL=5
dbt-1 exited with code 1
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.6s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.5s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.1s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | waiting for server to start....2024-03-24 17:33:19.350 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:33:19.353 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:33:19.362 UTC [51] LOG:  database system was shut down at 2024-03-24 17:33:18 UTC
source_postgres-1       | 2024-03-24 17:33:19.368 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       |  done
source_postgres-1       | server started
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 17:33:19.564 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 17:33:19.570 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:33:19.571 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 17:33:19.571 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 17:33:19.574 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | waiting for server to start....2024-03-24 17:33:19.666 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:33:19.671 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:33:19.682 UTC [51] LOG:  database system was shut down at 2024-03-24 17:33:19 UTC
destination_postgres-1  | 2024-03-24 17:33:19.689 UTC [48] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 17:33:19.718 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.121 s, total=0.147 s; sync files=315, longest=0.016 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:33:19.722 UTC [48] LOG:  database system is shut down
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 17:33:19.783 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:33:19.783 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:33:19.783 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 17:33:19.788 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:33:19.794 UTC [66] LOG:  database system was shut down at 2024-03-24 17:33:19 UTC
source_postgres-1       | 2024-03-24 17:33:19.799 UTC [1] LOG:  database system is ready to accept connections
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:33:19.828 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | waiting for server to shut down....2024-03-24 17:33:19.830 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:33:19.831 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:33:19.831 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:33:19.833 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  | 2024-03-24 17:33:19.941 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.086 s, total=0.110 s; sync files=301, longest=0.015 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:33:19.946 UTC [48] LOG:  database system is shut down
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:33:20.056 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:33:20.056 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:33:20.056 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:33:20.063 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:33:20.070 UTC [64] LOG:  database system was shut down at 2024-03-24 17:33:19 UTC
destination_postgres-1  | 2024-03-24 17:33:20.075 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:33:26  Running with dbt=1.5.8
dbt-1                   | 17:33:26  Registered adapter: postgres=1.5.8
dbt-1                   | 17:33:26  Found 5 models, 20 tests, 0 snapshots, 0 analyses, 311 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:33:26
destination_postgres-1  | 2024-03-24 17:33:26.700 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:33:26.735 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:33:26.750 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 17:33:26  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:33:26
dbt-1                   | 17:33:26  1 of 5 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:33:26.875 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:33:26  1 of 5 OK created sql table model public.actors ................................ [SELECT 20 in 0.12s]
dbt-1                   | 17:33:26  2 of 5 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:33:26.976 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:33:27  2 of 5 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.07s]
dbt-1                   | 17:33:27  3 of 5 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:33:27.072 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 17:33:27  3 of 5 OK created sql table model public.films ................................. [SELECT 20 in 0.11s]
dbt-1                   | 17:33:27  4 of 5 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:33:27.157 UTC [75] WARNING:  there is already a transaction in progress
dbt-1                   | 17:33:27  4 of 5 OK created sql table model public.film_ratings .......................... [SELECT 20 in 0.06s]
dbt-1                   | 17:33:27  5 of 5 START sql table model public.film_ratings_with_macro .................... [RUN]
destination_postgres-1  | 2024-03-24 17:33:27.226 UTC [76] WARNING:  there is already a transaction in progress
dbt-1                   | 17:33:27  5 of 5 OK created sql table model public.film_ratings_with_macro ............... [SELECT 20 in 0.06s]
destination_postgres-1  | 2024-03-24 17:33:27.269 UTC [77] WARNING:  there is already a transaction in progress
dbt-1                   | 17:33:27
dbt-1                   | 17:33:27  Finished running 5 table models in 0 hours 0 minutes and 0.64 seconds (0.64s).
dbt-1                   | 17:33:27
dbt-1                   | 17:33:27  Completed successfully
dbt-1                   | 17:33:27
dbt-1                   | 17:33:27  Done. PASS=5 WARN=0 ERROR=0 SKIP=0 TOTAL=5
dbt-1 exited with code 0
source_postgres-1       | 2024-03-24 17:38:19.864 UTC [64] LOG:  checkpoint starting: time
destination_postgres-1  | 2024-03-24 17:38:20.094 UTC [62] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 17:38:24.855 UTC [64] LOG:  checkpoint complete: wrote 52 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.937 s, sync=0.031 s, total=4.992 s; sync files=18, longest=0.009 s, average=0.002 s; distance=252 kB, estimate=252 kB
destination_postgres-1  | 2024-03-24 17:38:32.730 UTC [62] LOG:  checkpoint complete: wrote 128 buffers (0.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=12.584 s, sync=0.033 s, total=12.637 s; sync files=76, longest=0.005 s, average=0.001 s; distance=627 kB, estimate=627 kB
Gracefully stopping... (press Ctrl+C again to force)
[+] Stopping 4/4
 ✔ Container elt-dbt-1                   Stopped                                                                                0.0s
 ✔ Container elt-elt_script-1            Stopped                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Stopped                                                                                0.5s
 ✔ Container elt-source_postgres-1       Stopped                                                                                0.6s
canceled
PS C:\Users\chait\docker_tutorial\elt> docker compose down -v
[+] Running 5/5
 ✔ Container elt-dbt-1                   Removed                                                                                0.0s
 ✔ Container elt-elt_script-1            Removed                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Removed                                                                                0.0s
 ✔ Container elt-source_postgres-1       Removed                                                                                0.0s
 ✔ Network elt_elt_network               Removed                                                                                0.2s
PS C:\Users\chait\docker_tutorial\elt> docker compose up
[+] Running 5/5
 ✔ Network elt_elt_network               Created                                                                                0.0s
 ✔ Container elt-destination_postgres-1  Created                                                                                0.1s
 ✔ Container elt-source_postgres-1       Created                                                                                0.1s
 ✔ Container elt-elt_script-1            Created                                                                                0.0s
 ✔ Container elt-dbt-1                   Created                                                                                0.0s
Attaching to dbt-1, destination_postgres-1, elt_script-1, source_postgres-1
destination_postgres-1  | The files belonging to this database system will be owned by user "postgres".
destination_postgres-1  | This user must also own the server process.
destination_postgres-1  |
destination_postgres-1  | The database cluster will be initialized with locale "en_US.utf8".
destination_postgres-1  | The default database encoding has accordingly been set to "UTF8".
destination_postgres-1  | The default text search configuration will be set to "english".
destination_postgres-1  |
destination_postgres-1  | Data page checksums are disabled.
destination_postgres-1  |
destination_postgres-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
destination_postgres-1  | creating subdirectories ... ok
destination_postgres-1  | selecting dynamic shared memory implementation ... posix
destination_postgres-1  | selecting default max_connections ... 100
destination_postgres-1  | selecting default shared_buffers ... 128MB
destination_postgres-1  | selecting default time zone ... Etc/UTC
destination_postgres-1  | creating configuration files ... ok
destination_postgres-1  | running bootstrap script ... ok
source_postgres-1       | The files belonging to this database system will be owned by user "postgres".
source_postgres-1       | This user must also own the server process.
source_postgres-1       |
source_postgres-1       | The database cluster will be initialized with locale "en_US.utf8".
source_postgres-1       | The default database encoding has accordingly been set to "UTF8".
source_postgres-1       | The default text search configuration will be set to "english".
source_postgres-1       |
source_postgres-1       | Data page checksums are disabled.
source_postgres-1       |
source_postgres-1       | fixing permissions on existing directory /var/lib/postgresql/data ... ok
source_postgres-1       | creating subdirectories ... ok
source_postgres-1       | selecting dynamic shared memory implementation ... posix
source_postgres-1       | selecting default max_connections ... 100
source_postgres-1       | selecting default shared_buffers ... 128MB
source_postgres-1       | selecting default time zone ... Etc/UTC
source_postgres-1       | creating configuration files ... ok
source_postgres-1       | running bootstrap script ... ok
destination_postgres-1  | performing post-bootstrap initialization ... ok
source_postgres-1       | performing post-bootstrap initialization ... ok
destination_postgres-1  | initdb: warning: enabling "trust" authentication for local connections
destination_postgres-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
destination_postgres-1  | syncing data to disk ... ok
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | Success. You can now start the database server using:
destination_postgres-1  |
destination_postgres-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
destination_postgres-1  |
destination_postgres-1  | waiting for server to start....2024-03-24 17:39:57.351 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:39:57.354 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:39:57.364 UTC [51] LOG:  database system was shut down at 2024-03-24 17:39:56 UTC
destination_postgres-1  | 2024-03-24 17:39:57.370 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  |  done
destination_postgres-1  | server started
source_postgres-1       | syncing data to disk ... ok
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | Success. You can now start the database server using:
source_postgres-1       |
source_postgres-1       |     pg_ctl -D /var/lib/postgresql/data -l logfile start
source_postgres-1       |
source_postgres-1       | initdb: warning: enabling "trust" authentication for local connections
source_postgres-1       | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
source_postgres-1       | waiting for server to start....2024-03-24 17:39:57.478 UTC [48] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:39:57.481 UTC [48] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:39:57.489 UTC [51] LOG:  database system was shut down at 2024-03-24 17:39:57 UTC
source_postgres-1       | 2024-03-24 17:39:57.494 UTC [48] LOG:  database system is ready to accept connections
destination_postgres-1  | CREATE DATABASE
destination_postgres-1  |
destination_postgres-1  |
destination_postgres-1  | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
destination_postgres-1  |
destination_postgres-1  | waiting for server to shut down....2024-03-24 17:39:57.505 UTC [48] LOG:  received fast shutdown request
destination_postgres-1  | 2024-03-24 17:39:57.508 UTC [48] LOG:  aborting any active transactions
destination_postgres-1  | 2024-03-24 17:39:57.510 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
destination_postgres-1  | 2024-03-24 17:39:57.510 UTC [49] LOG:  shutting down
destination_postgres-1  | 2024-03-24 17:39:57.513 UTC [49] LOG:  checkpoint starting: shutdown immediate
source_postgres-1       |  done
source_postgres-1       | server started
destination_postgres-1  | 2024-03-24 17:39:57.607 UTC [49] LOG:  checkpoint complete: wrote 918 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.014 s, sync=0.071 s, total=0.098 s; sync files=301, longest=0.013 s, average=0.001 s; distance=4223 kB, estimate=4223 kB
destination_postgres-1  | 2024-03-24 17:39:57.611 UTC [48] LOG:  database system is shut down
source_postgres-1       | CREATE DATABASE
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 14
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 39
source_postgres-1       | CREATE TABLE
source_postgres-1       | CREATE TABLE
source_postgres-1       | INSERT 0 20
source_postgres-1       | INSERT 0 20
source_postgres-1       |
source_postgres-1       |
source_postgres-1       | waiting for server to shut down...2024-03-24 17:39:57.692 UTC [48] LOG:  received fast shutdown request
source_postgres-1       | .2024-03-24 17:39:57.694 UTC [48] LOG:  aborting any active transactions
source_postgres-1       | 2024-03-24 17:39:57.695 UTC [48] LOG:  background worker "logical replication launcher" (PID 54) exited with exit code 1
source_postgres-1       | 2024-03-24 17:39:57.696 UTC [49] LOG:  shutting down
source_postgres-1       | 2024-03-24 17:39:57.699 UTC [49] LOG:  checkpoint starting: shutdown immediate
destination_postgres-1  |  done
destination_postgres-1  | server stopped
destination_postgres-1  |
destination_postgres-1  | PostgreSQL init process complete; ready for start up.
destination_postgres-1  |
destination_postgres-1  | 2024-03-24 17:39:57.736 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
destination_postgres-1  | 2024-03-24 17:39:57.736 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
destination_postgres-1  | 2024-03-24 17:39:57.736 UTC [1] LOG:  listening on IPv6 address "::", port 5432
destination_postgres-1  | 2024-03-24 17:39:57.743 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
destination_postgres-1  | 2024-03-24 17:39:57.752 UTC [64] LOG:  database system was shut down at 2024-03-24 17:39:57 UTC
destination_postgres-1  | 2024-03-24 17:39:57.758 UTC [1] LOG:  database system is ready to accept connections
source_postgres-1       | 2024-03-24 17:39:57.821 UTC [49] LOG:  checkpoint complete: wrote 950 buffers (5.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.013 s, sync=0.095 s, total=0.125 s; sync files=315, longest=0.013 s, average=0.001 s; distance=4325 kB, estimate=4325 kB
source_postgres-1       | 2024-03-24 17:39:57.827 UTC [48] LOG:  database system is shut down
source_postgres-1       |  done
source_postgres-1       | server stopped
source_postgres-1       |
source_postgres-1       | PostgreSQL init process complete; ready for start up.
source_postgres-1       |
source_postgres-1       | 2024-03-24 17:39:57.924 UTC [1] LOG:  starting PostgreSQL 15.6 (Debian 15.6-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
source_postgres-1       | 2024-03-24 17:39:57.924 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
source_postgres-1       | 2024-03-24 17:39:57.924 UTC [1] LOG:  listening on IPv6 address "::", port 5432
source_postgres-1       | 2024-03-24 17:39:57.930 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
source_postgres-1       | 2024-03-24 17:39:57.937 UTC [66] LOG:  database system was shut down at 2024-03-24 17:39:57 UTC
source_postgres-1       | 2024-03-24 17:39:57.943 UTC [1] LOG:  database system is ready to accept connections
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump
elt_script-1            | --
elt_script-1            | -- Dumped from database version 15.6 (Debian 15.6-1.pgdg120+2)
elt_script-1            | -- Dumped by pg_dump version 15.6 (Debian 15.6-0+deb12u1)
elt_script-1            | SET statement_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET lock_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET idle_in_transaction_session_timeout = 0;
elt_script-1            | SET
elt_script-1            | SET client_encoding = 'UTF8';
elt_script-1            | SET
elt_script-1            | SET standard_conforming_strings = on;
elt_script-1            | SET
elt_script-1            | SELECT pg_catalog.set_config('search_path', '', false);
elt_script-1            |  set_config
elt_script-1            | ------------
elt_script-1            |
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | SET check_function_bodies = false;
elt_script-1            | SET
elt_script-1            | SET xmloption = content;
elt_script-1            | SET
elt_script-1            | SET client_min_messages = warning;
elt_script-1            | SET
elt_script-1            | SET row_security = off;
elt_script-1            | SET
elt_script-1            | SET default_tablespace = '';
elt_script-1            | SET
elt_script-1            | SET default_table_access_method = heap;
elt_script-1            | SET
elt_script-1            | --
elt_script-1            | -- Name: actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.actors (
elt_script-1            |     actor_id integer NOT NULL,
elt_script-1            |     actor_name character varying(255) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.actors_actor_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.actors_actor_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.actors_actor_id_seq OWNED BY public.actors.actor_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: film_actors; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_actors (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     actor_id integer NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_actors OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.film_category (
elt_script-1            |     category_id integer NOT NULL,
elt_script-1            |     film_id integer,
elt_script-1            |     category_name character varying(50) NOT NULL
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.film_category OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.film_category_category_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.film_category_category_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.film_category_category_id_seq OWNED BY public.film_category.category_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: films; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.films (
elt_script-1            |     film_id integer NOT NULL,
elt_script-1            |     title character varying(255) NOT NULL,
elt_script-1            |     release_date date,
elt_script-1            |     price numeric(5,2),
elt_script-1            |     rating character varying(10),
elt_script-1            |     user_rating numeric(2,1),
elt_script-1            |     CONSTRAINT films_user_rating_check CHECK (((user_rating >= (1)::numeric) AND (user_rating <= (5)::numeric)))
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.films OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.films_film_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.films_film_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.films_film_id_seq OWNED BY public.films.film_id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: users; Type: TABLE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE TABLE public.users (
elt_script-1            |     id integer NOT NULL,
elt_script-1            |     first_name character varying(50),
elt_script-1            |     last_name character varying(50),
elt_script-1            |     email character varying(100),
elt_script-1            |     date_of_birth date
elt_script-1            | );
elt_script-1            | CREATE TABLE
elt_script-1            | ALTER TABLE public.users OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | CREATE SEQUENCE public.users_id_seq
elt_script-1            |     AS integer
elt_script-1            |     START WITH 1
elt_script-1            |     INCREMENT BY 1
elt_script-1            |     NO MINVALUE
elt_script-1            |     NO MAXVALUE
elt_script-1            |     CACHE 1;
elt_script-1            | CREATE SEQUENCE
elt_script-1            | ALTER TABLE public.users_id_seq OWNER TO postgres;
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;
elt_script-1            | ALTER SEQUENCE
elt_script-1            | --
elt_script-1            | -- Name: actors actor_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors ALTER COLUMN actor_id SET DEFAULT nextval('public.actors_actor_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category category_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category ALTER COLUMN category_id SET DEFAULT nextval('public.film_category_category_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films film_id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films ALTER COLUMN film_id SET DEFAULT nextval('public.films_film_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Data for Name: actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.actors (actor_id, actor_name) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_actors; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_actors (film_id, actor_id) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: film_category; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.film_category (category_id, film_id, category_name) FROM stdin;
elt_script-1            | COPY 39
elt_script-1            | --
elt_script-1            | -- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.films (film_id, title, release_date, price, rating, user_rating) FROM stdin;
elt_script-1            | COPY 20
elt_script-1            | --
elt_script-1            | -- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | COPY public.users (id, first_name, last_name, email, date_of_birth) FROM stdin;
elt_script-1            | COPY 14
elt_script-1            | --
elt_script-1            | -- Name: actors_actor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.actors_actor_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: film_category_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.film_category_category_id_seq', 39, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      39
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.films_film_id_seq', 20, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      20
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | SELECT pg_catalog.setval('public.users_id_seq', 14, true);
elt_script-1            |  setval
elt_script-1            | --------
elt_script-1            |      14
elt_script-1            | (1 row)
elt_script-1            |
elt_script-1            | --
elt_script-1            | -- Name: actors actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.actors
elt_script-1            |     ADD CONSTRAINT actors_pkey PRIMARY KEY (actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_pkey PRIMARY KEY (film_id, actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_pkey PRIMARY KEY (category_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.films
elt_script-1            |     ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.users
elt_script-1            |     ADD CONSTRAINT users_pkey PRIMARY KEY (id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_actor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_actor_id_fkey FOREIGN KEY (actor_id) REFERENCES public.actors(actor_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_actors film_actors_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_actors
elt_script-1            |     ADD CONSTRAINT film_actors_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- Name: film_category film_category_film_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
elt_script-1            | --
elt_script-1            | ALTER TABLE ONLY public.film_category
elt_script-1            |     ADD CONSTRAINT film_category_film_id_fkey FOREIGN KEY (film_id) REFERENCES public.films(film_id);
elt_script-1            | ALTER TABLE
elt_script-1            | --
elt_script-1            | -- PostgreSQL database dump complete
elt_script-1            | --
elt_script-1            | Error connecting to postgres: Command '['pg_isready', '-h', 'source_postgres']' returned non-zero exit status 2.
elt_script-1            | Retrying in 5 seconds... (Attempt 1/5)
elt_script-1            | Successfully connected to postgres
elt_script-1            | Starting ELT Script. . .
elt_script-1            | Ending ELT Script. . .
elt_script-1 exited with code 0
dbt-1                   | 17:40:04  Running with dbt=1.5.8
dbt-1                   | 17:40:04  Registered adapter: postgres=1.5.8
dbt-1                   | 17:40:04  Found 6 models, 20 tests, 0 snapshots, 0 analyses, 311 macros, 0 operations, 0 seed files, 3 sources, 0 exposures, 0 metrics, 0 groups
dbt-1                   | 17:40:04
destination_postgres-1  | 2024-03-24 17:40:04.427 UTC [70] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:40:04.455 UTC [71] WARNING:  there is already a transaction in progress
destination_postgres-1  | 2024-03-24 17:40:04.468 UTC [71] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:04  Concurrency: 1 threads (target='dev')
dbt-1                   | 17:40:04
dbt-1                   | 17:40:04  1 of 6 START sql table model public.actors ..................................... [RUN]
destination_postgres-1  | 2024-03-24 17:40:04.548 UTC [72] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:04  1 of 6 OK created sql table model public.actors ................................ [SELECT 20 in 0.11s]
dbt-1                   | 17:40:04  2 of 6 START sql table model public.film_actors ................................ [RUN]
destination_postgres-1  | 2024-03-24 17:40:04.647 UTC [73] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:04  2 of 6 OK created sql table model public.film_actors ........................... [SELECT 20 in 0.07s]
dbt-1                   | 17:40:04  3 of 6 START sql table model public.films ...................................... [RUN]
destination_postgres-1  | 2024-03-24 17:40:04.716 UTC [74] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:04  3 of 6 OK created sql table model public.films ................................. [SELECT 20 in 0.07s]
dbt-1                   | 17:40:04  4 of 6 START sql table model public.film_ratings ............................... [RUN]
destination_postgres-1  | 2024-03-24 17:40:04.783 UTC [75] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:04  4 of 6 OK created sql table model public.film_ratings .......................... [SELECT 20 in 0.06s]
dbt-1                   | 17:40:04  5 of 6 START sql table model public.film_ratings_with_macro .................... [RUN]
destination_postgres-1  | 2024-03-24 17:40:04.889 UTC [76] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:04  5 of 6 OK created sql table model public.film_ratings_with_macro ............... [SELECT 20 in 0.10s]
dbt-1                   | 17:40:04  6 of 6 START sql table model public.specific_movie_genja ....................... [RUN]
destination_postgres-1  | 2024-03-24 17:40:04.956 UTC [77] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:04  6 of 6 OK created sql table model public.specific_movie_genja .................. [SELECT 1 in 0.06s]
destination_postgres-1  | 2024-03-24 17:40:04.994 UTC [78] WARNING:  there is already a transaction in progress
dbt-1                   | 17:40:05
dbt-1                   | 17:40:05  Finished running 6 table models in 0 hours 0 minutes and 0.62 seconds (0.62s).
dbt-1                   | 17:40:05
dbt-1                   | 17:40:05  Completed successfully
dbt-1                   | 17:40:05
dbt-1                   | 17:40:05  Done. PASS=6 WARN=0 ERROR=0 SKIP=0 TOTAL=6
dbt-1 exited with code 0
destination_postgres-1  | 2024-03-24 17:44:57.830 UTC [62] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 17:44:58.022 UTC [64] LOG:  checkpoint starting: time
source_postgres-1       | 2024-03-24 17:45:02.985 UTC [64] LOG:  checkpoint complete: wrote 52 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.934 s, sync=0.011 s, total=4.964 s; sync files=18, longest=0.004 s, average=0.001 s; distance=252 kB, estimate=252 kB
destination_postgres-1  | 2024-03-24 17:45:10.669 UTC [62] LOG:  checkpoint complete: wrote 130 buffers (0.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=12.773 s, sync=0.050 s, total=12.840 s; sync files=77, longest=0.010 s, average=0.001 s; distance=637 kB, estimate=637 kB
